(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a575c97e"],{"2b94":function(e,r,t){"use strict";t("bb47")},a9e32:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-modal",{attrs:{title:"注册",visible:e.visible,destroyOnClose:"",footer:null,width:"400px",maskClosable:!1},on:{cancel:e.handleModalHide}},[t("a-form-model",{ref:"myRuleForm",staticClass:"formClass",attrs:{model:e.myForm,rules:e.myRules}},[t("a-form-model-item",{ref:"name",attrs:{prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.myForm.name,callback:function(r){e.$set(e.myForm,"name",r)},expression:"myForm.name"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-model-item",{ref:"password",attrs:{prop:"password"}},[t("a-input-password",{attrs:{placeholder:"请输入正确的密码",autocomplete:"new-password"},model:{value:e.myForm.password,callback:function(r){e.$set(e.myForm,"password",r)},expression:"myForm.password"}})],1),t("a-form-model-item",{ref:"password2",attrs:{prop:"password2"}},[t("a-input-password",{attrs:{placeholder:"请输入正确的密码",autocomplete:"new-password"},model:{value:e.myForm.password2,callback:function(r){e.$set(e.myForm,"password2",r)},expression:"myForm.password2"}})],1),t("a-form-model-item",{ref:"companyName",attrs:{prop:"companyName"}},[t("a-input",{attrs:{placeholder:"请输入注册用户单位名称"},model:{value:e.myForm.companyName,callback:function(r){e.$set(e.myForm,"companyName",r)},expression:"myForm.companyName"}})],1),t("a-form-model-item",{ref:"DWDZ",attrs:{prop:"DWDZ"}},[t("a-input",{attrs:{placeholder:"请输入单位地址"},model:{value:e.myForm.DWDZ,callback:function(r){e.$set(e.myForm,"DWDZ",r)},expression:"myForm.DWDZ"}})],1),t("a-form-model-item",{ref:"LXR",attrs:{prop:"LXR"}},[t("a-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:e.myForm.LXR,callback:function(r){e.$set(e.myForm,"LXR",r)},expression:"myForm.LXR"}})],1),t("a-form-model-item",{ref:"idType",attrs:{prop:"idType"}},[t("a-select",{attrs:{placeholder:"请选择证件类型"},model:{value:e.myForm.idType,callback:function(r){e.$set(e.myForm,"idType",r)},expression:"myForm.idType"}},e._l(e.idTypes,(function(r,o){return t("a-select-option",{key:o,attrs:{value:r["TITLE"]}},[e._v(e._s(r["TITLE"]))])})),1)],1),t("a-form-model-item",{ref:"idNumber",attrs:{prop:"idNumber"}},[t("a-input",{attrs:{placeholder:"请输入正确的证件号码"},model:{value:e.myForm.idNumber,callback:function(r){e.$set(e.myForm,"idNumber",r)},expression:"myForm.idNumber"}})],1),t("a-form-model-item",{ref:"email",attrs:{prop:"email"}},[t("a-input",{attrs:{placeholder:"请输入正确的邮箱"},model:{value:e.myForm.email,callback:function(r){e.$set(e.myForm,"email",r)},expression:"myForm.email"}})],1),t("a-form-model-item",{ref:"mobile",attrs:{prop:"mobile"}},[t("a-input",{attrs:{placeholder:"请输入正确的手机"},model:{value:e.myForm.mobile,callback:function(r){e.$set(e.myForm,"mobile",r)},expression:"myForm.mobile"}})],1),t("a-form-model-item",{ref:"captcha",attrs:{prop:"captcha"}},[t("a-row",[t("a-col",{attrs:{span:16}},[t("a-input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.myForm.captcha,callback:function(r){e.$set(e.myForm,"captcha",r)},expression:"myForm.captcha"}},[t("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[t("a-button",{staticClass:"getCaptcha",attrs:{disabled:e.state.smsSendBtn},domProps:{textContent:e._s(e.state.smsSendBtn?e.state.time+" s":"获取验证码")},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.getCaptcha(r)}}})],1)],1)],1),t("a-form-model-item",[t("a-button",{staticClass:"register-button",staticStyle:{width:"100%","margin-top":"24px"},attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.submitting},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.handleSubmit(r)}}},[e._v("注册")])],1)],1)],1)},a=[],i=(t("d81d"),t("b0c0"),t("4d63"),t("ac1f"),t("25f0"),t("1276"),t("04b8")),s=t("72fe"),m=t.n(s),n={name:"Register",props:{visible:{type:Boolean,default:!1}},data:function(){var e=this;return{idTypes:[{TITLE:"身份证",EXTRAVALUE:"/(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/"},{TITLE:"统一社会信用代码",EXTRAVALUE:"/^[^_IOZSVa-z\\W]{2}\\d{6}[^_IOZSVa-z\\W]{10}$/g"}],myForm:{name:"",companyName:"",idType:"统一社会信用代码",idNumber:"",password:"",password2:"",email:"",mobile:"",captcha:"",DWDZ:"",LXR:""},myRules:{name:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入用户名")):Object(i["e"])(t)?e.CheckRegisterInfo("loginname",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("只能输入5-20个以字母开头、可带数字、“_”、“.”的字串"))}}],companyName:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的注册用户单位名称")):e.CheckRegisterInfo("YHMC",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))}))}}],idType:[{required:!0,message:"请选择证件类型",trigger:"change"}],idNumber:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){if(""===t)o(new Error("请输入正确的证件号码"));else{var a=e.myForm.idType,i="";if(e.idTypes.map((function(e,r){e["TITLE"]===a&&(i=e["EXTRAVALUE"])})),e._.isEmpty(i))o();else{var s,m=i.split(",");s=e._.isEmpty(m[1])?new RegExp(m[0]):new RegExp(m[0],m[1]),s.test(t)?e.CheckRegisterInfo("idNumber",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("请输入正确的证件号码"))}}}}],password:[{required:!0,trigger:["blur","change"],validator:function(e,r,t){""===r?t(new Error("请输入正确的密码")):Object(i["b"])(r)?t():t(new Error("只能输入6-20个字母、数字、下划线 "))}}],password2:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的密码")):t===e.myForm.password?o():o(new Error("请输入上栏同一密码 "))}}],email:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的邮箱")):Object(i["a"])(t)?e.CheckRegisterInfo("mailbox",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("请输入正确的邮箱"))}}],mobile:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的11位手机号")):Object(i["c"])(t)?e.CheckRegisterInfo("mobilePhone",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("请输入正确的11位手机号"))}}]},state:{time:60,smsSendBtn:!1,LoginMobileTime:60,LoginMobileSmsSendBtn:!1,LoginMobileValid:!1,RPSmsSendBtn:!1,RPSmsValid:!1,RPSTime:60,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},submitting:!1}},mounted:function(){this.getOriginize()},methods:{handleModalHide:function(){this.$emit("handleModalHide"),this.myForm={name:"",companyName:"",idType:"统一社会信用代码",idNumber:"",password:"",password2:"",email:"",mobile:"",captcha:"",DWDZ:"",LXR:""}},CheckRegisterInfo:function(e,r,t){this.$WebApi.user["CheckRegisterInfo"]({key:e,value:r}).then((function(e){return t&&t(e),e})).catch((function(e){}))},getOriginize:function(){var e=this;this.$WebApi.util["LookupDict"]({listcode:"001"}).then((function(r){e.idTypes=r})).catch((function(e){}))},getCaptcha:function(e){var r=this;e.preventDefault(),this.$refs.myRuleForm.validate((function(e,t){e&&r.$WebApi.user["SendVerification"]({sPhoneNum:r.myForm.mobile}).then((function(e){r.state.smsSendBtn=!0,"短信发送失败！"===e?r.$message.error("短信发送失败!60秒后再验证"):r.$message.success("短信发送成功!");var t=window.setInterval((function(){r.state.time--<=0&&(r.state.time=60,r.state.smsSendBtn=!1,window.clearInterval(t))}),1e3)})).catch((function(e){}))}))},handleSubmit:function(){var e=this;this.submitting=!0,this.$refs.myRuleForm.validate((function(r,t){if(r){var o={loginName:e.myForm.name,password:m()(e.myForm.password),mailbox:e.myForm.email,mobilePhone:e.myForm.mobile,validate:e.myForm.captcha,companyName:e.myForm.companyName,idNumber:e.myForm.idNumber,idType:e.myForm.idType,DWDZ:e.myForm.DWDZ,LXR:e.myForm.LXR};e.$WebApi.user["Register"]({data:o}).then((function(r){998===r.code?(e.submitting=!1,e.$message.error(r.desc)):(e.submitting=!1,e.handleModalHide(),e.$message.success("注册成功",2))})).catch((function(){e.$message.error("注册失败",2)}))}else e.submitting=!1}))}}},l=n,c=(t("2b94"),t("2877")),p=Object(c["a"])(l,o,a,!1,null,"5a006fb0",null);r["default"]=p.exports},bb47:function(e,r,t){}}]);