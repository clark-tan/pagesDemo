(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10051558"],{1233:function(t,e,a){},"2aef":function(t,e,a){"use strict";a("1233")},fd19:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cascader-select"},[a("div",{staticClass:"content"},[t.reload?[t._l(t.saveData,(function(e,s){return[a("div",{key:s,staticClass:"my-items"},[a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[t._v("测量事项")]):t._e(),a("a-cascader",{ref:"cascader",refInFor:!0,attrs:{allowClear:!1,options:t.options,fieldNames:{label:"title",value:"title",children:"rows"},"display-render":t.displayRender,"show-search":{filter:t.filter},"expand-trigger":"hover",placeholder:"请选择测量事项"},on:{change:function(e,a){return t.clsxChange(s,e,a)}},model:{value:t.saveData[s].clsx,callback:function(e){t.$set(t.saveData[s],"clsx",e)},expression:"saveData[index].clsx"}})],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[t._v("测绘单位")]):t._e(),a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择测绘公司","option-filter-prop":"children","filter-option":t.filterOption},on:{focus:t.handleFocus,blur:t.handleBlur,change:function(e){return t.compChange(s,e)}},model:{value:t.saveData[s].cldw,callback:function(e){t.$set(t.saveData[s],"cldw",e)},expression:"saveData[index].cldw"}},[t._l(t.selectData,(function(e,s){return[a("a-select-option",{key:s,attrs:{value:e.value}},[t._v(" "+t._s(e.value)+" ")])]}))],2)],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[t._v("联系人")]):t._e(),a("a-input",{attrs:{value:t.saveData[s].LXR||"-",disabled:""}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[t._v("联系电话")]):t._e(),a("a-input",{attrs:{value:t.saveData[s].LXDH||"-",disabled:""}},[a("a-icon",{attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[t._v("操作")]):t._e(),a("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteItem(s)}}},[t._v("删除")])],1)])]}))]:t._e(),a("div",{staticClass:"add-button"},[a("a-button",{attrs:{type:"primary"},on:{click:t.addRows}},[t._v("添加")])],1)],2),a("div",{staticClass:"footer"},[a("div",{staticClass:"my-button"},[t._.isEmpty(t.permission.isTemporarySave)&&!0===t.permission.isTemporarySave?[a("a-button",{attrs:{type:"primary"},on:{click:t.saveCurrentData}},[t._v("暂存")])]:t._e(),a("a-button",{on:{click:function(e){return t.handleTableData(-1)}}},[t._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleTableData(1)}}},[t._v(t._s(t.isLast?"提交申请":"下一步"))])],2)])])},i=[],n=(a("c975"),a("d81d"),a("45fc"),a("a434"),{name:"CascaderSelect",components:{},props:{isLast:{default:!1,type:Boolean,required:!0},permission:{default:function(){},type:Object,required:!0},remoteData:{default:function(){},type:Object,required:!1}},data:function(){return{reload:!0,options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[{value:"xihu",label:"West Lake"}]}]},{value:"jiangsu",label:"Jiangsu",children:[{value:"nanjing",label:"Nanjing",children:[{value:"zhonghuamen",label:"Zhong Hua Men"}]}]}],selectData:[],selectedOptions:[],saveData:[{clsx:[],cldw:"",LXR:"",LXDH:""}],ischange:!1}},computed:{},watch:{remoteData:{handler:function(t,e){t&&this.fillData2form(t)},immediate:!0,deep:!0}},created:function(){},mounted:function(){this.GetMeasurementItems()},methods:{GetSurveyCompanyInfo:function(t,e){var a=this;this.$WebApi.busiProcess["GetSurveyCompanyInfo"]({chdw:t}).then((function(t){a.saveData[e].LXR=t.LXR,a.saveData[e].LXDH=t.LXDH})).catch((function(t){}))},GetMeasurementItems:function(){var t=this;this.$WebApi.preBusiness["GetMeasurementItems"]().then((function(e){var a=e.rowsList[0].CLSX,s=e.rowsList[0].CLDW;t.options=a,t.selectData=s})).catch((function(t){}))},clsxChange:function(t,e,a){this.ischange=!0,a[a.length-1].disabled=!0,this.selectedOptions[t]=a,this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE")},displayRender:function(t){var e=t.labels;return e[e.length-1]},filter:function(t,e){return e.some((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1}))},compChange:function(t,e){this.GetSurveyCompanyInfo(e,t)},handleBlur:function(){},handleFocus:function(){},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},addRows:function(){this.ischange=!0,this.saveData.push({clsx:[],cldw:"",LXR:"",LXDH:""}),this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE")},deleteItem:function(t){var e=this;this.ischange=!0,this.selectedOptions[t]&&(this.selectedOptions[t].length>0?this.selectedOptions[t][this.selectedOptions[t].length-1].disabled=!1:this.selectedOptions[t]["disabled"]=!1,this.selectedOptions.splice(t,1));var a=JSON.parse(JSON.stringify(this.saveData));a.splice(t,1),this.saveData=[],this.saveData=a,this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE"),this.reload=!1,this.$nextTick((function(){e.reload=!0}))},handleTableData:function(t){1===t?(Window._.isEmpty(this.remoteData)||(this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE")),this.isEnableSubmit()&&this.$emit("currentStepOK",{componentName:"CascaderSelect",num:t})):this.$emit("currentStepOK",{componentName:"CascaderSelect",num:t})},isEnableSubmit:function(){var t=!0;return this.saveData&&this.saveData.length>0?this.saveData.map((function(e,a){Window._.isEmpty(e.cldw)&&(t=!1),e.clsx&&0===e.clsx.length&&(t=!1)})):t=!1,t||this.$message.error("测量事项填写失败"),t},getSubmitData:function(){var t=this.saveData;return{REC_CLSX:t}},saveCurrentData:function(){this.$emit("saveAllData")},fillData2form:function(t){var e=this;Window._.isEmpty(t)||(this.saveData=t["REC_CLSX"],t["REC_CLSX"].map((function(t,a){var s=t.clsx[t.clsx.length-1];e.addDisable2options(e.options,s)})))},addDisable2options:function(t,e){var a=this;t.map((function(t,s){t.title===e&&(t.disabled=!0,a.selectedOptions.push(t)),t.rows&&t.rows.length>0&&a.addDisable2options(t.rows,e)}))}}}),o=n,c=(a("2aef"),a("2877")),l=Object(c["a"])(o,s,i,!1,null,"3c391b36",null);e["default"]=l.exports}}]);