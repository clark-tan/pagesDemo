(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user","chunk-11b43682","chunk-a575c97e","chunk-e0067972"],{"2b94":function(e,r,t){"use strict";t("bb47")},3390:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("result",{staticClass:"registerResult",attrs:{isSuccess:!0,content:!1,title:e.email,description:e.description}},[t("template",{slot:"action"},[t("a-button",{attrs:{size:"large",type:"primary"}},[e._v("查看邮箱")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"large"},on:{click:e.goHomeHandle}},[e._v("返回首页")])],1)],2)},s=[],a=t("2af9"),i={name:"RegisterResult",components:{Result:a["b"]},data:function(){return{description:"激活邮件已发送到你的邮箱中，邮件有效期为24小时。请及时登录邮箱，点击邮件中的链接激活帐户。",form:{}}},computed:{email:function(){var e=this.form&&this.form.email||"xxx",r="你的账户：".concat(e," 注册成功");return r}},created:function(){this.form=this.$route.params},methods:{goHomeHandle:function(){this.$router.push({name:"login"})}}},n=i,l=(t("51f9"),t("2877")),d=Object(l["a"])(n,o,s,!1,null,"63bc3de3",null);r["default"]=d.exports},"51f9":function(e,r,t){"use strict";t("8da9")},"54cc":function(e,r,t){},"5e14":function(e,r,t){"use strict";t("955d")},"8da9":function(e,r,t){},"955d":function(e,r,t){},"9ed6":function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"main"},[t("a-card",{staticClass:"userLoginCard",attrs:{bodyStyle:{padding:0}}},[t("a-row",{staticClass:"cardRow",attrs:{type:"flex"}},[t("a-col",{staticClass:"imgCol"}),t("a-col",{staticClass:"formCol"},[t("h1",{staticClass:"formTitle"},[e._v("用户登录")]),t("login-form",{on:{handleShowRetrievePasswordForm:e.handleShowRetrievePasswordForm,handleShowRegisterForm:e.handleShowRegisterForm}}),t("div",{staticClass:"copyRight"},[e._v("广东南方数码科技股份有限公司")])],1)],1),t("RegisterFormTwo",{attrs:{visible:e.showRegisterForm},on:{handleModalHide:e.handleModalHide}}),t("RetrievePasswordForm",{attrs:{visible:e.showRetrievePasswordForm},on:{modalHide:function(r){e.showRetrievePasswordForm=!1}}})],1)],1)},s=[],a=t("9116"),i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-modal",{attrs:{title:"忘记密码",visible:e.visible,footer:null,maskClosable:!1,destroyOnClose:""},on:{cancel:e.handleModalHide}},[t("a-form-model",{ref:"retrievePassword",attrs:{model:e.retrievePasswordFormModel,rules:e.retrievePasswordFormRules}},[t("a-steps",{attrs:{current:e.current,size:"small"}},e._l(e.steps,(function(e){return t("a-step",{key:e.title,attrs:{title:e.title}})})),1),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.current,expression:"current === 0"}]},[t("a-form-model-item",{ref:"retrievePasswordMobile",attrs:{prop:"retrievePasswordMobile"}},[t("a-input",{attrs:{size:"large",placeholder:"请输入手机号码"},on:{change:e.handleRetrievePhoneCheck},model:{value:e.retrievePasswordFormModel.retrievePasswordMobile,callback:function(r){e.$set(e.retrievePasswordFormModel,"retrievePasswordMobile",r)},expression:"retrievePasswordFormModel.retrievePasswordMobile"}},[t("a-select",{attrs:{slot:"addonBefore",size:"large",defaultValue:"+86"},slot:"addonBefore"},[t("a-select-option",{attrs:{value:"+86"}},[e._v("+86")])],1)],1)],1),t("a-row",{attrs:{gutter:10,type:"flex"}},[t("a-col",{staticStyle:{flex:"1"}},[t("a-form-model-item",{ref:"retrievePasswordCaptcha",attrs:{prop:"retrievePasswordCaptcha"}},[t("a-input",{attrs:{size:"large",type:"text",placeholder:"验证码"},model:{value:e.retrievePasswordFormModel.retrievePasswordCaptcha,callback:function(r){e.$set(e.retrievePasswordFormModel,"retrievePasswordCaptcha",r)},expression:"retrievePasswordFormModel.retrievePasswordCaptcha"}},[t("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),t("a-col",[t("a-button",{staticClass:"getCaptcha",attrs:{size:"large",disabled:!e.state.RPSmsValid||e.state.RPSmsSendBtn},domProps:{textContent:e._s(e.state.RPSmsSendBtn?e.state.RPSTime+" s":"获取验证码")},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.getRetrievePasswordCaptcha(r)}}})],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.current,expression:"current === 1"}]},[t("a-form-model-item",{ref:"newPassword",attrs:{prop:"newPassword"}},[t("a-input-password",{attrs:{placeholder:"请输入新密码",size:"large",autocomplete:"new-password"},model:{value:e.retrievePasswordFormModel.newPassword,callback:function(r){e.$set(e.retrievePasswordFormModel,"newPassword",r)},expression:"retrievePasswordFormModel.newPassword"}})],1),t("a-form-model-item",{ref:"Repassword",attrs:{prop:"Repassword"}},[t("a-input-password",{attrs:{size:"large",placeholder:"确认密码",autocomplete:"new-password"},model:{value:e.retrievePasswordFormModel.Repassword,callback:function(r){e.$set(e.retrievePasswordFormModel,"Repassword",r)},expression:"retrievePasswordFormModel.Repassword"}})],1)],1),t("div",[e.current<e.steps.length-1?t("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{type:"primary",size:"large"},on:{click:e.next}},[e._v("下一步")]):e._e(),e.current==e.steps.length-1?t("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.submitting,type:"primary",size:"large"},on:{click:e.handleAllSubmit}},[e._v("完成")]):e._e()],1)],1)],1)},n=[],l=(t("498a"),t("04b8")),d=t("72fe"),m=t.n(d),c={name:"RetrievePasswordForm",props:{visible:{type:Boolean,default:!1}},data:function(){var e=this;return{retrievePasswordFormModel:{retrievePasswordMobile:"",retrievePasswordCaptcha:"",newPassword:"",Repassword:""},retrievePasswordFormRules:{retrievePasswordMobile:[{required:!0,message:"请输入正确的11位手机号"},{validator:function(e,r,t){Object(l["c"])(r)?t():t(new Error("请输入正确的11位手机号"))},trigger:["change","blur"]}],retrievePasswordCaptcha:[{required:!0,message:"请输入验证码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码"},{validator:function(e,r,t){Object(l["b"])(r)?t():t(new Error("请输入6-20个字母、数字、下划线"))},trigger:["change","blur"]}],Repassword:[{required:!0,message:"请输入确认密码"},{validator:function(r,t,o){var s=e.retrievePasswordFormModel["newPassword"]||"";t&&t.trim()!==s.trim()&&o(new Error("两次密码不一致")),o()},trigger:["change","blur"]}]},current:0,steps:[{title:"输入手机校验",content:"First-content"},{title:"重置密码",content:"Second-content"}],submitting:!1,state:{time:60,smsSendBtn:!1,LoginMobileTime:60,LoginMobileSmsSendBtn:!1,LoginMobileValid:!1,RPSmsSendBtn:!1,RPSmsValid:!1,RPSTime:60,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"}}},methods:{handleModalHide:function(){this.$emit("modalHide"),this.retrievePasswordFormModel={retrievePasswordMobile:"",retrievePasswordCaptcha:"",newPassword:"",Repassword:""},this.current=0},handleRetrievePhoneCheck:function(){var e=this;this.$refs.retrievePassword.validateField("retrievePasswordMobile",(function(r){e.state.RPSmsValid=!r}))},getRetrievePasswordCaptcha:function(){var e=this,r=this.state;this.$refs.retrievePassword.validateField("retrievePasswordMobile",(function(t){Window._.isEmpty(t)&&(r.RPSmsSendBtn=!0,e.$WebApi.user["SendVerification"]({sPhoneNum:e.retrievePasswordFormModel.retrievePasswordMobile}).then((function(t){"短信发送失败！"===t?e.$message.error("短信发送失败!60秒后再验证"):e.$message.success("短信发送成功!");var o=window.setInterval((function(){r.RPSTime--<=0&&(r.RPSTime=60,r.RPSmsSendBtn=!1,window.clearInterval(o))}),1e3)})).catch((function(e){})))}))},next:function(){if(0===this.current)this.GetByValidate(this.retrievePasswordFormModel.retrievePasswordMobile,this.retrievePasswordFormModel.retrievePasswordCaptcha);else{var e=!0;this.$refs.retrievePassword.validateField(["retrievePasswordMobile","retrievePasswordCaptcha"],(function(r){r&&(e=!1)})),e&&this.current++}},handleAllSubmit:function(){var e=this;this.$refs.retrievePassword.validate((function(r,t){if(r){e.submitting=!0;var o={newPassword:m()(e.retrievePasswordFormModel.newPassword),mobilePhone:e.retrievePasswordFormModel.retrievePasswordMobile,validate:e.retrievePasswordFormModel.retrievePasswordCaptcha};e.$WebApi.user["RetrievePassword"]({data:JSON.stringify(o)}).then((function(r){e.submitting=!1,r.code&&998===r.code?e.$message.error(r.desc):(e.handleModalHide(),e.$message.success("重置密码成功",2))})).catch((function(r){e.submitting=!1}))}}))},GetByValidate:function(e,r){var t=this;this.$WebApi.user["GetByValidate"]({data:JSON.stringify({sValidate:r,sMobile:e})}).then((function(e){e.code&&998===e.code?t.$message.error(e.desc):(t.$refs.retrievePassword.validateField(["retrievePasswordMobile","retrievePasswordCaptcha"],(function(e){})),t.current++)})).catch((function(e){})).then((function(){}))}}},u=c,p=(t("5e14"),t("2877")),w=Object(p["a"])(u,i,n,!1,null,"16c5bac6",null),f=w.exports,h=t("cbb8"),v={name:"Login",components:{RetrievePasswordForm:f,RegisterFormTwo:a["a"],LoginForm:h["default"]},data:function(){return{showRegisterForm:!1,showRetrievePasswordForm:!1}},methods:{handleModalHide:function(e){this.showRegisterForm=e},handleShowRetrievePasswordForm:function(){this.showRetrievePasswordForm=!0},handleShowRegisterForm:function(){this.showRegisterForm=!0}}},b=v,g=(t("dce0"),Object(p["a"])(b,o,s,!1,null,"1e5b3351",null));r["default"]=g.exports},a9e32:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-modal",{attrs:{title:"注册",visible:e.visible,destroyOnClose:"",footer:null,width:"400px",maskClosable:!1},on:{cancel:e.handleModalHide}},[t("a-form-model",{ref:"myRuleForm",staticClass:"formClass",attrs:{model:e.myForm,rules:e.myRules}},[t("a-form-model-item",{ref:"name",attrs:{prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.myForm.name,callback:function(r){e.$set(e.myForm,"name",r)},expression:"myForm.name"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-model-item",{ref:"password",attrs:{prop:"password"}},[t("a-input-password",{attrs:{placeholder:"请输入正确的密码",autocomplete:"new-password"},model:{value:e.myForm.password,callback:function(r){e.$set(e.myForm,"password",r)},expression:"myForm.password"}})],1),t("a-form-model-item",{ref:"password2",attrs:{prop:"password2"}},[t("a-input-password",{attrs:{placeholder:"请输入正确的密码",autocomplete:"new-password"},model:{value:e.myForm.password2,callback:function(r){e.$set(e.myForm,"password2",r)},expression:"myForm.password2"}})],1),t("a-form-model-item",{ref:"companyName",attrs:{prop:"companyName"}},[t("a-input",{attrs:{placeholder:"请输入注册用户单位名称"},model:{value:e.myForm.companyName,callback:function(r){e.$set(e.myForm,"companyName",r)},expression:"myForm.companyName"}})],1),t("a-form-model-item",{ref:"DWDZ",attrs:{prop:"DWDZ"}},[t("a-input",{attrs:{placeholder:"请输入单位地址"},model:{value:e.myForm.DWDZ,callback:function(r){e.$set(e.myForm,"DWDZ",r)},expression:"myForm.DWDZ"}})],1),t("a-form-model-item",{ref:"LXR",attrs:{prop:"LXR"}},[t("a-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:e.myForm.LXR,callback:function(r){e.$set(e.myForm,"LXR",r)},expression:"myForm.LXR"}})],1),t("a-form-model-item",{ref:"idType",attrs:{prop:"idType"}},[t("a-select",{attrs:{placeholder:"请选择证件类型"},model:{value:e.myForm.idType,callback:function(r){e.$set(e.myForm,"idType",r)},expression:"myForm.idType"}},e._l(e.idTypes,(function(r,o){return t("a-select-option",{key:o,attrs:{value:r["TITLE"]}},[e._v(e._s(r["TITLE"]))])})),1)],1),t("a-form-model-item",{ref:"idNumber",attrs:{prop:"idNumber"}},[t("a-input",{attrs:{placeholder:"请输入正确的证件号码"},model:{value:e.myForm.idNumber,callback:function(r){e.$set(e.myForm,"idNumber",r)},expression:"myForm.idNumber"}})],1),t("a-form-model-item",{ref:"email",attrs:{prop:"email"}},[t("a-input",{attrs:{placeholder:"请输入正确的邮箱"},model:{value:e.myForm.email,callback:function(r){e.$set(e.myForm,"email",r)},expression:"myForm.email"}})],1),t("a-form-model-item",{ref:"mobile",attrs:{prop:"mobile"}},[t("a-input",{attrs:{placeholder:"请输入正确的手机"},model:{value:e.myForm.mobile,callback:function(r){e.$set(e.myForm,"mobile",r)},expression:"myForm.mobile"}})],1),t("a-form-model-item",{ref:"captcha",attrs:{prop:"captcha"}},[t("a-row",[t("a-col",{attrs:{span:16}},[t("a-input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.myForm.captcha,callback:function(r){e.$set(e.myForm,"captcha",r)},expression:"myForm.captcha"}},[t("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[t("a-button",{staticClass:"getCaptcha",attrs:{disabled:e.state.smsSendBtn},domProps:{textContent:e._s(e.state.smsSendBtn?e.state.time+" s":"获取验证码")},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.getCaptcha(r)}}})],1)],1)],1),t("a-form-model-item",[t("a-button",{staticClass:"register-button",staticStyle:{width:"100%","margin-top":"24px"},attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.submitting},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.handleSubmit(r)}}},[e._v("注册")])],1)],1)],1)},s=[],a=(t("d81d"),t("b0c0"),t("4d63"),t("ac1f"),t("25f0"),t("1276"),t("04b8")),i=t("72fe"),n=t.n(i),l={name:"Register",props:{visible:{type:Boolean,default:!1}},data:function(){var e=this;return{idTypes:[{TITLE:"身份证",EXTRAVALUE:"/(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/"},{TITLE:"统一社会信用代码",EXTRAVALUE:"/^[^_IOZSVa-z\\W]{2}\\d{6}[^_IOZSVa-z\\W]{10}$/g"}],myForm:{name:"",companyName:"",idType:"统一社会信用代码",idNumber:"",password:"",password2:"",email:"",mobile:"",captcha:"",DWDZ:"",LXR:""},myRules:{name:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入用户名")):Object(a["e"])(t)?e.CheckRegisterInfo("loginname",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("只能输入5-20个以字母开头、可带数字、“_”、“.”的字串"))}}],companyName:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的注册用户单位名称")):e.CheckRegisterInfo("YHMC",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))}))}}],idType:[{required:!0,message:"请选择证件类型",trigger:"change"}],idNumber:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){if(""===t)o(new Error("请输入正确的证件号码"));else{var s=e.myForm.idType,a="";if(e.idTypes.map((function(e,r){e["TITLE"]===s&&(a=e["EXTRAVALUE"])})),e._.isEmpty(a))o();else{var i,n=a.split(",");i=e._.isEmpty(n[1])?new RegExp(n[0]):new RegExp(n[0],n[1]),i.test(t)?e.CheckRegisterInfo("idNumber",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("请输入正确的证件号码"))}}}}],password:[{required:!0,trigger:["blur","change"],validator:function(e,r,t){""===r?t(new Error("请输入正确的密码")):Object(a["b"])(r)?t():t(new Error("只能输入6-20个字母、数字、下划线 "))}}],password2:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的密码")):t===e.myForm.password?o():o(new Error("请输入上栏同一密码 "))}}],email:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的邮箱")):Object(a["a"])(t)?e.CheckRegisterInfo("mailbox",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("请输入正确的邮箱"))}}],mobile:[{required:!0,trigger:["blur","change"],validator:function(r,t,o){""===t?o(new Error("请输入正确的11位手机号")):Object(a["c"])(t)?e.CheckRegisterInfo("mobilePhone",t,(function(r){"成功！"===r?o():!e._.isEmpty(r)&&r.hasOwnProperty("desc")&&o(new Error(r["desc"]))})):o(new Error("请输入正确的11位手机号"))}}]},state:{time:60,smsSendBtn:!1,LoginMobileTime:60,LoginMobileSmsSendBtn:!1,LoginMobileValid:!1,RPSmsSendBtn:!1,RPSmsValid:!1,RPSTime:60,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},submitting:!1}},mounted:function(){this.getOriginize()},methods:{handleModalHide:function(){this.$emit("handleModalHide"),this.myForm={name:"",companyName:"",idType:"统一社会信用代码",idNumber:"",password:"",password2:"",email:"",mobile:"",captcha:"",DWDZ:"",LXR:""}},CheckRegisterInfo:function(e,r,t){this.$WebApi.user["CheckRegisterInfo"]({key:e,value:r}).then((function(e){return t&&t(e),e})).catch((function(e){}))},getOriginize:function(){var e=this;this.$WebApi.util["LookupDict"]({listcode:"001"}).then((function(r){e.idTypes=r})).catch((function(e){}))},getCaptcha:function(e){var r=this;e.preventDefault(),this.$refs.myRuleForm.validate((function(e,t){e&&r.$WebApi.user["SendVerification"]({sPhoneNum:r.myForm.mobile}).then((function(e){r.state.smsSendBtn=!0,"短信发送失败！"===e?r.$message.error("短信发送失败!60秒后再验证"):r.$message.success("短信发送成功!");var t=window.setInterval((function(){r.state.time--<=0&&(r.state.time=60,r.state.smsSendBtn=!1,window.clearInterval(t))}),1e3)})).catch((function(e){}))}))},handleSubmit:function(){var e=this;this.submitting=!0,this.$refs.myRuleForm.validate((function(r,t){if(r){var o={loginName:e.myForm.name,password:n()(e.myForm.password),mailbox:e.myForm.email,mobilePhone:e.myForm.mobile,validate:e.myForm.captcha,companyName:e.myForm.companyName,idNumber:e.myForm.idNumber,idType:e.myForm.idType,DWDZ:e.myForm.DWDZ,LXR:e.myForm.LXR};e.$WebApi.user["Register"]({data:o}).then((function(r){998===r.code?(e.submitting=!1,e.$message.error(r.desc)):(e.submitting=!1,e.handleModalHide(),e.$message.success("注册成功",2))})).catch((function(){e.$message.error("注册失败",2)}))}else e.submitting=!1}))}}},d=l,m=(t("2b94"),t("2877")),c=Object(m["a"])(d,o,s,!1,null,"5a006fb0",null);r["default"]=c.exports},bb47:function(e,r,t){},dce0:function(e,r,t){"use strict";t("54cc")}}]);