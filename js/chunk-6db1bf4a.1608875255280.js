(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6db1bf4a"],{"1b84":function(t,a,e){},"6be4":function(t,a,e){"use strict";e("1b84")},"95ae":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-modal",{attrs:{visible:t.protocolData.visible,title:t.protocolData.title,"confirm-loading":t.protocolData.confirmLoading,footer:null,maskClosable:!1,width:"600px"},on:{ok:t.handleProtocolOK,cancel:t.handleProtocolCancel}},[e("div",[e("div",{staticStyle:{"text-indent":"2em"}},[t._v(t._s(this.protocolData.content.title))]),e("div",{staticStyle:{margin:"10px 0 5px 0"}},[e("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v("注意事项:")])]),e("div",{staticStyle:{color:"red"}},[e("a-icon",{attrs:{type:"exclamation-circle"}}),t._v(" 请认真填写信息，确保所填信息真实有效！")],1),e("div",{staticClass:"protocolContentData"},[e("a-list",{attrs:{size:"small",split:!1,"data-source":t.protocolData.content.data},scopedSlots:t._u([{key:"renderItem",fn:function(a,i){return e("a-list-item",{key:i},[t._v(" "+t._s(a)+" ")])}}])})],1)]),e("div",{staticClass:"addClass"},[e("div",{staticClass:"buttonClass"},[e("a-button",{attrs:{type:"danger"},on:{click:t.handleComplaint}},[t._v("我要投诉")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleSuggest}},[t._v("我要建议")])],1)])]),e("a-modal",{attrs:{visible:t.suggestData.visible,title:t.suggestData.title,"confirm-loading":t.suggestData.confirmLoading,closable:t.suggestData.closable,maskClosable:!1,width:"800px"},on:{ok:t.handleSuggestOK,cancel:t.handleSuggestCancel}},[e("template",{slot:"footer"},[e("a-button",{attrs:{type:"default",disabled:t.suggestData.confirmLoading},on:{click:t.handleSaveSuggestData}},[t._v("暂存")]),e("a-button",{attrs:{type:"primary",disabled:t.suggestData.confirmLoading},on:{click:t.handleSuggestOK}},[t._v("提交")])],1),e("a-form-model",{ref:"suggestForm",attrs:{model:t.suggestFormData,rules:t.rules,"label-col":{span:4},"wrapper-col":{span:17}}},[e("a-form-model-item",{ref:"REC_JYBT",attrs:{label:"建议标题",prop:"REC_JYBT"}},[e("a-input",{attrs:{placeholder:"请输入建议标题"},model:{value:t.suggestFormData.REC_JYBT,callback:function(a){t.$set(t.suggestFormData,"REC_JYBT",a)},expression:"suggestFormData.REC_JYBT"}})],1),e("a-form-model-item",{ref:"REC_JYLX",attrs:{label:"建议类型",prop:"REC_JYLX"}},[e("a-select",{attrs:{placeholder:"请选择建议类型"},on:{change:t.JYLX_Change},model:{value:t.suggestFormData.REC_JYLX,callback:function(a){t.$set(t.suggestFormData,"REC_JYLX",a)},expression:"suggestFormData.REC_JYLX"}},[t._l(t.inData.JYLX_LIST,(function(a,i){return[e("a-select-option",{key:i,attrs:{value:a.value}},[t._v(" "+t._s(a.value)+" ")])]}))],2)],1),e("a-form-model-item",{ref:"REC_JYRXM",attrs:{label:"建议人姓名",prop:"REC_JYRXM"}},[e("a-input",{attrs:{placeholder:"请输入建议人姓名"},model:{value:t.suggestFormData.REC_JYRXM,callback:function(a){t.$set(t.suggestFormData,"REC_JYRXM",a)},expression:"suggestFormData.REC_JYRXM"}})],1),e("a-form-model-item",{ref:"REC_SFZHM",attrs:{label:"身份证号",prop:"REC_SFZHM"}},[e("a-input",{attrs:{placeholder:"请输入身份证号"},model:{value:t.suggestFormData.REC_SFZHM,callback:function(a){t.$set(t.suggestFormData,"REC_SFZHM",a)},expression:"suggestFormData.REC_SFZHM"}})],1),e("a-form-model-item",{ref:"REC_LXDH",attrs:{label:"联系电话",prop:"REC_LXDH"}},[e("a-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.suggestFormData.REC_LXDH,callback:function(a){t.$set(t.suggestFormData,"REC_LXDH",a)},expression:"suggestFormData.REC_LXDH"}})],1),e("a-form-model-item",{ref:"REC_DZYX",attrs:{label:"电子邮箱",prop:"REC_DZYX"}},[e("a-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:t.suggestFormData.REC_DZYX,callback:function(a){t.$set(t.suggestFormData,"REC_DZYX",a)},expression:"suggestFormData.REC_DZYX"}})],1),e("a-form-model-item",{ref:"REC_LXDZ",attrs:{label:"联系地址",prop:"REC_LXDZ"}},[e("a-input",{attrs:{placeholder:"请输入联系地址"},model:{value:t.suggestFormData.REC_LXDZ,callback:function(a){t.$set(t.suggestFormData,"REC_LXDZ",a)},expression:"suggestFormData.REC_LXDZ"}})],1),e("a-form-model-item",{ref:"REC_JYNR",attrs:{label:"建议内容",prop:"REC_JYNR"}},[e("a-input",{attrs:{placeholder:"请输入建议内容"},model:{value:t.suggestFormData.REC_JYNR,callback:function(a){t.$set(t.suggestFormData,"REC_JYNR",a)},expression:"suggestFormData.REC_JYNR"}})],1),e("a-form-model-item",{ref:"fileurl",attrs:{label:"附件上传",prop:"fileurl"}},[e("div",{staticClass:"clearfix"},[e("a-upload",{attrs:{action:t.MaterialUpload,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleUploadChange}},[t.fileList.length<8?e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("请上传图片")])],1):t._e()]),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handlePicModalCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1)],2),e("a-modal",{ref:"complaint",attrs:{visible:t.complaintData.visible,title:t.complaintData.title,"confirm-loading":t.complaintData.confirmLoading,closable:t.complaintData.closable,maskClosable:!1,width:"800px"},on:{ok:t.handleComplaintOK,cancel:t.handleComplaintCancel}},[e("template",{slot:"footer"},[e("a-button",{attrs:{type:"default",disabled:t.complaintData.confirmLoading},on:{click:t.handleSaveComplaintData}},[t._v("暂存")]),e("a-button",{attrs:{type:"primary",disabled:t.complaintData.confirmLoading},on:{click:t.handleComplaintOK}},[t._v("提交")])],1),e("a-form-model",{ref:"complaintForm",attrs:{model:t.complaintFormData,rules:t.rules,"label-col":{span:4},"wrapper-col":{span:17}}},[e("a-form-model-item",{ref:"REC_TSBT",attrs:{label:"投诉标题",prop:"REC_TSBT"}},[e("a-input",{attrs:{placeholder:"请输入投诉标题"},model:{value:t.complaintFormData.REC_TSBT,callback:function(a){t.$set(t.complaintFormData,"REC_TSBT",a)},expression:"complaintFormData.REC_TSBT"}})],1),e("a-form-model-item",{ref:"REC_TSLX",attrs:{label:"投诉类型",prop:"REC_TSLX"}},[e("a-select",{attrs:{placeholder:"请选择投诉类型"},on:{change:t.TSLX_Change},model:{value:t.complaintFormData.REC_TSLX,callback:function(a){t.$set(t.complaintFormData,"REC_TSLX",a)},expression:"complaintFormData.REC_TSLX"}},[t._l(t.inData.TSLX_LIST,(function(a,i){return[e("a-select-option",{key:i,attrs:{value:a.value}},[t._v(" "+t._s(a.value)+" ")])]}))],2)],1),e("a-form-model-item",{ref:"REC_TSRXM",attrs:{label:"投诉人姓名",prop:"REC_TSRXM"}},[e("a-input",{attrs:{placeholder:"请输入投诉人姓名"},model:{value:t.complaintFormData.REC_TSRXM,callback:function(a){t.$set(t.complaintFormData,"REC_TSRXM",a)},expression:"complaintFormData.REC_TSRXM"}})],1),e("a-form-model-item",{ref:"REC_SFZHM",attrs:{label:"身份证号",prop:"REC_SFZHM"}},[e("a-input",{attrs:{placeholder:"请输入身份证号"},model:{value:t.complaintFormData.REC_SFZHM,callback:function(a){t.$set(t.complaintFormData,"REC_SFZHM",a)},expression:"complaintFormData.REC_SFZHM"}})],1),e("a-form-model-item",{ref:"REC_LXDH",attrs:{label:"联系电话",prop:"REC_LXDH"}},[e("a-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.complaintFormData.REC_LXDH,callback:function(a){t.$set(t.complaintFormData,"REC_LXDH",a)},expression:"complaintFormData.REC_LXDH"}})],1),e("a-form-model-item",{ref:"REC_DZYX",attrs:{label:"电子邮箱",prop:"REC_DZYX"}},[e("a-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:t.complaintFormData.REC_DZYX,callback:function(a){t.$set(t.complaintFormData,"REC_DZYX",a)},expression:"complaintFormData.REC_DZYX"}})],1),e("a-form-model-item",{ref:"REC_LXDZ",attrs:{label:"联系地址",prop:"REC_LXDZ"}},[e("a-input",{attrs:{placeholder:"请输入联系地址"},model:{value:t.complaintFormData.REC_LXDZ,callback:function(a){t.$set(t.complaintFormData,"REC_LXDZ",a)},expression:"complaintFormData.REC_LXDZ"}})],1),e("a-form-model-item",{ref:"REC_TSNR",attrs:{label:"投诉内容",prop:"REC_TSNR"}},[e("a-input",{attrs:{placeholder:"请输入投诉内容"},model:{value:t.complaintFormData.REC_TSNR,callback:function(a){t.$set(t.complaintFormData,"REC_TSNR",a)},expression:"complaintFormData.REC_TSNR"}})],1),e("a-form-model-item",{ref:"fileurl",attrs:{label:"附件上传",prop:"fileurl"}},[e("div",{staticClass:"clearfix"},[e("a-upload",{attrs:{action:t.MaterialUpload,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleUploadChange}},[t.fileList.length<8?e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v("请上传图片")])],1):t._e()]),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handlePicModalCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)])],1)],2)],1)},s=[],l=(e("d3b7"),e("96cf"),e("1da1")),o=e("5530"),r=e("377c");function n(t){return new Promise((function(a,e){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return a(i.result)},i.onerror=function(t){return e(t)}}))}var c={name:"SuggestAndComplaintModel",props:{user:{type:Object,default:function(){return{}}}},watch:{"$store.state.suggestAndComplaintModel.showProtocol":function(){this.protocolData.visible=!0,this.getDataFromLoginInfo()}},mounted:function(){this.getDataFromLoginInfo()},data:function(){return{rules:{REC_JYBT:[{required:!0,message:"请输入建议标题",trigger:["change","blur"]}],REC_TSBT:[{required:!0,message:"请输入投诉标题",trigger:["change","blur"]}],REC_JYLX:[{required:!0,message:"请选择建议类型",trigger:["change"]}],REC_TSLX:[{required:!0,message:"请选择投诉类型",trigger:["change"]}],REC_JYRXM:[{required:!0,message:"请输入建议人姓名",trigger:["change","blur"]}],REC_TSRXM:[{required:!0,message:"请输入投诉人姓名",trigger:["change","blur"]}],REC_SFZHM:[{required:!0,message:"请输入身份证号码",trigger:["change","blur"]}],REC_LXDH:[{required:!1,message:"请输入联系电话",trigger:["change","blur"]}],REC_LXDZ:[{required:!1,message:"请输入联系地址",trigger:["change","blur"]}],REC_DZYX:[{required:!1,message:"请输入电子邮箱",trigger:["change","blur"]}],REC_JYNR:[{required:!1,message:"请输入建议内容",trigger:["change","blur"]}],REC_TSNR:[{required:!1,message:"请输入投诉内容",trigger:["change","blur"]}],fileurl:[{required:!1,message:"请上传附件"}]},inData:{JYLX_LIST:[{value:"网站建议"},{value:"部门建议"},{value:"我要纠错"}],TSLX_LIST:[{value:"网站投诉"},{value:"部门投诉"},{value:"其他"}]},protocolData:{visible:!1,title:"关于投诉与建议说明",confirmLoading:!1,content:{title:"欢迎您进入平昌县建设工程项目“多审合一”网上办事大厅提出您的投诉与建议，填写前，请仔细阅读以下注意事项。",data:["1、接受自然人、法人或其他组织对平昌县自然资源局和规划局改进工程建设项目“多测合一”办事服务效能、服务方式及网上办事大厅建设的意见和建议。","2、感谢您给我们提出的宝贵的建议。我们会进行严格保密。您的个人信息绝不会向外公开，请根据您的实际情况或内心真实想法如实填写。","3、您可以在用户中心查看您提出的投诉与建议的回复情况。","4、您必须对您填写信息的真实性负责，对其带来的影响承担相应的责任。"]}},suggestData:{visible:!1,title:"新增建议",confirmLoading:!1},suggestFormData:{REC_JYBT:"",REC_JYLX:"",REC_JYRXM:"",REC_SFZHM:"",REC_LXDH:"",REC_LXDZ:"",REC_DZYX:"",REC_JYNR:"",fileurl:[]},suggestSubmitData:{},MaterialUpload:r["K"],fileList:[],previewVisible:!1,complaintData:{visible:!1,title:"新增投诉",confirmLoading:!1,closable:!0},complaintFormData:{REC_TSBT:"",REC_TSLX:"",REC_TSRXM:"",REC_SFZHM:"",REC_LXDH:"",REC_LXDZ:"",REC_DZYX:"",REC_TSNR:"",fileurl:[]},previewImage:""}},methods:{getDataFromLoginInfo:function(){var t,a,e=this.user;for(var i in e)e.hasOwnProperty(i)&&("MAILBOX"===i&&(this.complaintFormData.REC_DZYX=e[i],this.suggestFormData.REC_DZYX=e[i]),"MOBILEPHONE"===i&&(this.complaintFormData.REC_LXDH=e[i],this.suggestFormData.REC_LXDH=e[i]),"DWDZ"===i&&(this.complaintFormData.REC_LXDZ=e[i],this.suggestFormData.REC_LXDZ=e[i]),"USERNAME"===i&&(this.complaintFormData.REC_TSRXM=e[i],this.suggestFormData.REC_JYRXM=e[i]),"ZJLX"===i&&(t=e[i],"身份证"===t&&(this.complaintFormData.REC_SFZHM=a,this.suggestFormData.REC_SFZHM=a)),"ZJHM"===i&&(a=e[i],"身份证"===t&&(this.complaintFormData.REC_SFZHM=a,this.suggestFormData.REC_SFZHM=a)));"身份证"===t&&(this.complaintFormData.REC_SFZHM=a,this.suggestFormData.REC_SFZHM=a)},handleProtocolOK:function(){this.protocolData.visible=!1},handleProtocolCancel:function(){this.protocolData.visible=!1},handleComplaint:function(){this.fileurl=[],this.fileList=[],this.protocolData.visible=!1,this.complaintData.visible=!0},handleSuggest:function(){this.fileurl=[],this.fileList=[],this.protocolData.visible=!1,this.suggestData.visible=!0},handleSuggestOK:function(t){var a=this;this.suggestSubmitData=Object(o["a"])(Object(o["a"])({},this.suggestFormData),{},{userid:this.user.userID,docunid:this.docunid}),this.$refs.suggestForm.validate((function(t,e){t?a.SubmitSuggestions():a.$message.warning("请输入所有必填表单项")}))},handleSuggestCancel:function(t){this.suggestData.visible=!1,this.clearnData()},handleSaveSuggestData:function(){this.suggestSubmitData=Object(o["a"])(Object(o["a"])({},this.suggestFormData),{},{userid:this.user.userID,docunid:this.docunid}),this.SaveSuggestionsDataByTemporarily()},JYLX_Change:function(t){},handlePreview:function(t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,n(t.originFileObj);case 3:t.preview=e.sent;case 4:a.previewImage=t.url||t.preview,a.previewVisible=!0;case 6:case"end":return e.stop()}}),e)})))()},handleUploadChange:function(t){var a=t.fileList,e=t.file;if(this.fileList=a,e&&"done"===e.status&&e.response&&0===e.response.code&&e.response.data[0].fileUrl&&this.fileurl.push(e.response.data[0].fileUrl),e&&"removed"===e.status&&e.url){var i=e.url;Window._.remove(this.fileurl,(function(t){return t===i}))}!0===this.suggestData.visible&&(this.$set(this.suggestFormData,"fileurl",JSON.parse(JSON.stringify(this.fileurl))),this.$refs.suggestForm.validateField("fileurl")),!0===this.complaintData.visible&&(this.$set(this.complaintFormData,"fileurl",JSON.parse(JSON.stringify(this.fileurl))),this.$refs.complaintForm.validateField("fileurl"))},handlePicModalCancel:function(){this.previewVisible=!1},handleComplaintOK:function(t){var a=this;this.complaintSubmitData=Object(o["a"])(Object(o["a"])({},this.complaintFormData),{},{userid:this.user.userID,docunid:this.docunid}),this.$refs.complaintForm.validate((function(t,e){t?a.SubmitComplaint():a.$message.warning("请输入所有必填表单项")}))},handleComplaintCancel:function(t){this.complaintData.visible=!1,this.clearnData()},handleSaveComplaintData:function(){this.complaintSubmitData=Object(o["a"])(Object(o["a"])({},this.complaintFormData),{},{userid:this.user.userID,docunid:this.docunid}),this.SaveComplaintDataByTemporarily()},TSLX_Change:function(t){},SaveComplaintDataByTemporarily:function(){var t=this;this.complaintData.confirmLoading=!0,this.complaintData.closable=!1,this.$WebApi.suggest["SaveComplaintDataByTemporarily"]({data:JSON.stringify(this.complaintSubmitData)}).then((function(a){t.emitQueryComplaint(),t.complaintData.confirmLoading=!1,t.complaintData.visible=!1,t.complaintData.closable=!0,t.clearnData()})).catch((function(a){t.emitQueryComplaint(),t.complaintData.confirmLoading=!1,t.complaintData.visible=!1,t.complaintData.closable=!0,t.clearnData()}))},SubmitComplaint:function(){var t=this;this.complaintData.confirmLoading=!0,this.complaintData.closable=!1,this.$WebApi.suggest["SubmitComplaint"]({data:JSON.stringify(this.complaintSubmitData)}).then((function(a){t.emitQueryComplaint(),t.complaintData.confirmLoading=!1,t.complaintData.visible=!1,t.complaintData.closable=!0,t.clearnData()})).catch((function(a){t.emitQueryComplaint(),t.complaintData.confirmLoading=!1,t.complaintData.visible=!1,t.complaintData.closable=!0,t.clearnData()}))},clearnData:function(){this.complaintFormData={REC_TSBT:"",REC_TSLX:"",REC_TSRXM:"",REC_SFZHM:"",REC_LXDH:"",REC_LXDZ:"",REC_DZYX:"",REC_TSNR:"",fileurl:[]},this.suggestFormData={REC_JYBT:"",REC_JYLX:"",REC_JYRXM:"",REC_SFZHM:"",REC_LXDH:"",REC_LXDZ:"",REC_DZYX:"",REC_JYNR:"",fileurl:[]},this.fileurl=[],this.fileList=[],this.suggestSubmitData={},this.complaintSubmitData={},this.saveData={}},SaveSuggestionsDataByTemporarily:function(){var t=this;this.suggestData.confirmLoading=!0,this.suggestData.closable=!1,this.$WebApi.suggest["SaveSuggestionsDataByTemporarily"]({data:JSON.stringify(this.suggestSubmitData)}).then((function(a){t.emitQuerySuggestions(),t.suggestData.confirmLoading=!1,t.suggestData.visible=!1,t.suggestData.closable=!0,t.clearnData()})).catch((function(a){t.emitQuerySuggestions(),t.suggestData.confirmLoading=!1,t.suggestData.visible=!1,t.suggestData.closable=!0,t.clearnData()}))},SubmitSuggestions:function(){var t=this;this.suggestData.confirmLoading=!0,this.suggestData.closable=!1,this.$WebApi.suggest["SubmitSuggestions"]({data:JSON.stringify(this.suggestSubmitData)}).then((function(a){t.emitQuerySuggestions(),t.suggestData.confirmLoading=!1,t.suggestData.visible=!1,t.suggestData.closable=!0,t.clearnData()})).catch((function(a){t.emitQuerySuggestions(),t.suggestData.confirmLoading=!1,t.suggestData.visible=!1,t.suggestData.closable=!0,t.clearnData()}))},emitQueryComplaint:function(){this.$store.commit("CHANGE_QUERY_COMPLAINT")},emitQuerySuggestions:function(){this.$store.commit("CHANGE_QUERY_SUGGESTIONS")}}},m=c,u=(e("6be4"),e("2877")),g=Object(u["a"])(m,i,s,!1,null,"6d5c1120",null);a["default"]=g.exports}}]);