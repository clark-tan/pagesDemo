(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49c9b068","chunk-2d2307dd"],{"185c":function(e,t,a){"use strict";a("be7d")},"2d2b":function(e,t,a){},5133:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"securityPage"},[a("p",{staticClass:"title"},[e._v("登录设置")]),a("a-divider",{staticClass:"titleDivider"}),a("a-row",{staticClass:"content",attrs:{gutter:10}},[a("a-col",{staticClass:"label",attrs:{span:4}},[e._v("登录密码")]),a("a-col",{attrs:{span:9}},[e._v("密码至少超过6位数")]),a("a-col",{staticClass:"value",attrs:{span:8}}),a("a-col",{staticClass:"actionCol",attrs:{span:3}},[a("a",{on:{click:function(t){return e.changePassword()}}},[e._v("修改密码")])])],1),a("a-divider",{staticClass:"rowDivider"}),a("p",{staticClass:"title title2"},[e._v("绑定信息")]),a("a-divider",{staticClass:"titleDivider"}),a("a-row",{staticClass:"content",attrs:{gutter:10}},[a("a-col",{staticClass:"label",attrs:{span:4}},[e._v("手机绑定")]),a("a-col",{attrs:{span:9}},[e._v("可用于登录账号，找回密码，接受短信通知")]),a("a-col",{staticClass:"value",attrs:{span:8}},[a("a-icon",{staticStyle:{color:"#5CA431"},attrs:{type:"check-circle",theme:"filled"}}),e._v(e._s(e.setNumber))],1),a("a-col",{staticClass:"actionCol",attrs:{span:3}},[a("a",{on:{click:function(t){return e.changeMobilePhone()}}},[e._v("更换手机号码")])])],1),a("a-divider",{staticClass:"rowDivider"}),a("a-row",{staticClass:"content",attrs:{gutter:10}},[a("a-col",{staticClass:"label",attrs:{span:4}},[e._v("邮箱绑定")]),a("a-col",{attrs:{span:9}},[e._v("已绑定邮箱")]),a("a-col",{staticClass:"value",attrs:{span:8}},[a("a-icon",{staticStyle:{color:"#5CA431"},attrs:{type:"check-circle",theme:"filled"}}),e._v(e._s(e.setMailBox))],1),a("a-col",{staticClass:"actionCol",attrs:{span:3}},[a("a",{on:{click:function(t){return e.changeMailBox()}}},[e._v("修改邮箱")])])],1),a("a-divider",{staticClass:"rowDivider"}),a("a-modal",{attrs:{title:"修改密码",visible:e.ChangePasswordVisible,confirmLoading:e.confirmLoading,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form",{ref:"passwordForm",attrs:{form:e.passwordForm},on:{submit:e.onChangePasswordSubmit}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["oldPassword",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"[\n            'oldPassword',\n            {\n              rules: [{ required: true, message: '请输入密码', whitespace: true }]\n            }\n          ]"}],attrs:{size:"large",placeholder:"请输入原始密码",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-popover",{attrs:{placement:"rightTop",trigger:["focus"],getPopupContainer:function(e){return e.parentElement}},model:{value:e.state.passwordLevelChecked,callback:function(t){e.$set(e.state,"passwordLevelChecked",t)},expression:"state.passwordLevelChecked"}},[a("template",{slot:"content"},[a("div",{style:{width:"240px"}},[a("div",{class:["user-register",e.passwordLevelClass]},[e._v(" 强度： "),a("span",[e._v(e._s(e.passwordLevelName))])]),a("a-progress",{attrs:{percent:e.state.percent,showInfo:!1,strokeColor:e.passwordLevelColor}})],1)]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["newPassword",{rules:[{validator:this.handlePasswordLevel},{validator:this.handlePasswordVerify}],validateTrigger:["change","blur"]}],expression:"[\n              'newPassword',\n              {\n                rules: [{ validator: this.handlePasswordLevel }, { validator: this.handlePasswordVerify }],\n                validateTrigger: ['change', 'blur']\n              }\n            ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"请输入新密码"},on:{click:e.handlePasswordInputClick}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],2),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password2",{rules:[{required:!0,message:"请输入确认密码"},{validator:this.handlePasswordCheck}],validateTrigger:["change","blur"]}],expression:"[\n            'password2',\n            {\n              rules: [{ required: true, message: '请输入确认密码' }, { validator: this.handlePasswordCheck }],\n              validateTrigger: ['change', 'blur']\n            }\n          ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"确认密码"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-row",{staticStyle:{margin:"0 -4px"},attrs:{gutter:8}},[a("a-col",{attrs:{span:16}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入手机验证码"}],validateTrigger:"blur"}],expression:"[\n                'captcha',\n                {\n                  rules: [{ required: true, message: '请输入手机验证码' }],\n                  validateTrigger: 'blur'\n                }\n              ]"}],attrs:{size:"large",placeholder:"请输入手机验证码"}},[a("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),a("a-col",{staticStyle:{"padding-left":"4px"},attrs:{span:8}},[a("a-button",{staticClass:"captcha-button",staticStyle:{width:"100%"},attrs:{disabled:e.state.CPSmsSendBtn,size:"large"},domProps:{textContent:e._s(e.state.CPSmsSendBtn?e.state.CPTime+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha(t)}}},[e._v("获取验证码")])],1)],1)],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{size:"large",htmlType:"submit",type:"primary",loading:e.confirmLoading}},[e._v("确定")])],1)],1)],1),a("change-mobile-form",{attrs:{visible:e.ChangeMobleVisible},on:{modalHide:function(t){e.ChangeMobleVisible=!1}}}),a("a-modal",{attrs:{title:"修改邮箱",visible:e.ChangeEmailVisible,confirmLoading:e.confirmLoading,footer:null},on:{cancel:e.EmailHandleCancel}},[a("a-form",{ref:"changeEmailForm",attrs:{form:e.changeEmailForm},on:{submit:e.onEmailSubmit}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["newEmail",{rules:[{required:!0,type:"email",message:"请输入邮箱地址"}]}],expression:"[\n            'newEmail',\n            {\n              rules: [{ required: true, type: 'email', message: '请输入邮箱地址' }]\n            }\n          ]"}],attrs:{size:"large",placeholder:"新邮箱",type:"text"}})],1),a("a-form-item",[a("a-row",{staticStyle:{margin:"0 -4px"},attrs:{gutter:8}},[a("a-col",{attrs:{span:16}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入手机验证码"}],validateTrigger:"blur"}],expression:"[\n                'captcha',\n                {\n                  rules: [{ required: true, message: '请输入手机验证码' }],\n                  validateTrigger: 'blur'\n                }\n              ]"}],attrs:{size:"large",placeholder:"请输入手机验证码"}},[a("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),a("a-col",{staticStyle:{"padding-left":"4px"},attrs:{span:8}},[a("a-button",{staticClass:"captcha-button",staticStyle:{width:"100%"},attrs:{disabled:e.state.CPSmsSendBtn,size:"large"},domProps:{textContent:e._s(e.state.CPSmsSendBtn?e.state.CPTime+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha(t)}}},[e._v("获取验证码")])],1)],1)],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{size:"large",htmlType:"submit",type:"primary"}},[e._v("确定")])],1)],1)],1),a("a-modal",{attrs:{title:"修改单位信息",visible:e.ChangeCompanyNameVisible,confirmLoading:e.confirmLoading,footer:null},on:{cancel:e.CompanyNameHandleCancel}},[a("a-form",{ref:"changeCompanyNameForm",attrs:{form:e.changeCompanyNameForm},on:{submit:e.onCompanyNameSubmit}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName",{rules:[{required:!0,message:"请输入单位名称"}],initialValue:this.setCompanyName}],expression:"[\n            'companyName',\n            {\n              rules: [{ required: true, message: '请输入单位名称' }],\n              initialValue: this.setCompanyName\n            }\n          ]"}],attrs:{size:"large",placeholder:"输入新的单位名称",type:"text"}})],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["DWDZ",{rules:[{required:!0,message:"输入单位地址"}],initialValue:this.setDWDZ}],expression:"[\n            'DWDZ',\n            {\n              rules: [{ required: true, message: '输入单位地址' }],\n              initialValue: this.setDWDZ\n            }\n          ]"}],attrs:{size:"large",placeholder:"输入新的单位地址",type:"text"}})],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["LXR",{rules:[{required:!0,message:"输入联系人"}],initialValue:this.setLXR}],expression:"[\n            'LXR',\n            {\n              rules: [{ required: true, message: '输入联系人' }],\n              initialValue: this.setLXR\n            }\n          ]"}],attrs:{size:"large",placeholder:"输入新的联系人",type:"text"}})],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{size:"large",htmlType:"submit",type:"primary"}},[e._v("确定")])],1)],1)],1)],1)},i=[],r=(a("ac1f"),a("1276"),a("498a"),a("5530")),n=a("72fe"),o=a.n(n),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"更换手机号码",visible:e.visible,footer:null,maskClosable:!1,destroyOnClose:""},on:{cancel:e.handleModalHide}},[a("a-form-model",{ref:"changeMobile",attrs:{model:e.changeMobileFormModel,rules:e.changeMobileFormRules}},[a("a-steps",{attrs:{current:e.current,size:"small"}},e._l(e.steps,(function(e){return a("a-step",{key:e.title,attrs:{title:e.title}})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.current,expression:"current === 0"}]},[a("a-form-model-item",{ref:"initMobile",attrs:{prop:"initMobile"}},[a("a-input",{attrs:{size:"large",placeholder:"旧手机号",disabled:""},on:{change:function(t){return e.handleCaptchaMobileCheck("initMobile")}},model:{value:e.changeMobileFormModel.initMobile,callback:function(t){e.$set(e.changeMobileFormModel,"initMobile",t)},expression:"changeMobileFormModel.initMobile"}},[a("a-select",{attrs:{slot:"addonBefore",size:"large",defaultValue:"+86"},slot:"addonBefore"},[a("a-select-option",{attrs:{value:"+86"}},[e._v("+86")]),a("a-select-option",{attrs:{value:"+87"}},[e._v("+87")])],1)],1)],1),a("a-row",{attrs:{gutter:10,type:"flex"}},[a("a-col",{staticStyle:{flex:"1"}},[a("a-form-model-item",{ref:"captcha",attrs:{prop:"captcha"}},[a("a-input",{attrs:{size:"large",type:"text",placeholder:"验证码"},model:{value:e.changeMobileFormModel.captcha,callback:function(t){e.$set(e.changeMobileFormModel,"captcha",t)},expression:"changeMobileFormModel.captcha"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),a("a-col",[a("a-button",{staticClass:"getCaptcha",attrs:{size:"large",disabled:!e.captchaState.initMobile.mobileValid||e.captchaState.initMobile.sendBtn},domProps:{textContent:e._s(e.captchaState.initMobile.sendBtn?e.captchaState.initMobile.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha("initMobile")}}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.current,expression:"current === 1"}]},[a("a-form-model-item",{ref:"newMobile",attrs:{prop:"newMobile"}},[a("a-input",{attrs:{size:"large",placeholder:"新手机号"},on:{change:function(t){return e.handleCaptchaMobileCheck("newMobile")}},model:{value:e.changeMobileFormModel.newMobile,callback:function(t){e.$set(e.changeMobileFormModel,"newMobile",t)},expression:"changeMobileFormModel.newMobile"}},[a("a-select",{attrs:{slot:"addonBefore",size:"large",defaultValue:"+86"},slot:"addonBefore"},[a("a-select-option",{attrs:{value:"+86"}},[e._v("+86")]),a("a-select-option",{attrs:{value:"+87"}},[e._v("+87")])],1)],1)],1),a("a-row",{attrs:{gutter:10,type:"flex"}},[a("a-col",{staticStyle:{flex:"1"}},[a("a-form-model-item",{ref:"captcha2",attrs:{prop:"captcha2"}},[a("a-input",{attrs:{size:"large",type:"text",placeholder:"验证码"},model:{value:e.changeMobileFormModel.captcha2,callback:function(t){e.$set(e.changeMobileFormModel,"captcha2",t)},expression:"changeMobileFormModel.captcha2"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),a("a-col",[a("a-button",{staticClass:"getCaptcha",attrs:{size:"large",disabled:!e.captchaState.newMobile.mobileValid||e.captchaState.newMobile.sendBtn},domProps:{textContent:e._s(e.captchaState.newMobile.sendBtn?e.captchaState.newMobile.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha("newMobile")}}})],1)],1)],1),a("div",[e.current<e.steps.length-1?a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{type:"primary",size:"large"},on:{click:e.next}},[e._v("下一步")]):e._e(),e.current==e.steps.length-1?a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.submitting,type:"primary",size:"large"},on:{click:e.handleAllSubmit}},[e._v("完成")]):e._e()],1)],1)],1)},c=[],u=a("04b8"),d=a("ed08"),m={name:"ChangeMobileForm",props:{visible:{type:Boolean,default:!1}},data:function(){var e=this;return{changeMobileFormModel:{initMobile:this.$store.state.user.user.MOBILEPHONE,captcha:"",newMobile:"",captcha2:""},changeMobileFormRules:{initMobile:[{required:!0,message:"请输入正确的11位手机号"},{validator:function(e,t,a){Object(u["c"])(t)?a():a(new Error("请输入正确的11位手机号"))},trigger:["change","blur"]}],captcha:[{required:!0,message:"请输入验证码",trigger:["change","blur"]}],newMobile:[{required:!0,message:"请输入正确的11位手机号"},{validator:function(t,a,s){a&&a.trim()===e.changeMobileFormModel["initMobile"].trim()?s(new Error("请输入与旧手机号不一样的新手机号")):Object(u["c"])(a)?s():s(new Error("请输入正确的11位手机号"))},trigger:["change","blur"]}],captcha2:[{required:!0,message:"请输入验证码",trigger:["change","blur"]}]},current:0,steps:[{title:"请输入旧手机号",content:"First-content"},{title:"请输入新手机号",content:"Second-content"}],submitting:!1,captchaState:{initMobile:{time:60,sendBtn:!1,mobileValid:!0},newMobile:{time:60,sendBtn:!1,mobileValid:!1}}}},mounted:function(){},methods:{handleModalHide:function(){this.$emit("modalHide"),this.changeMobileFormModel={initMobile:this.$store.state.user.user.MOBILEPHONE,captcha:"",newMobile:"",captcha2:""},this.captchaState.initMobile.mobileValid=!0,this.captchaState.newMobile.mobileValid=!1,this.current=0},handleCaptchaMobileCheck:function(e){var t=this;this.$nextTick((function(){t.$refs.changeMobile.validateField(e,(function(a){t.captchaState[e].mobileValid=!a}))}))},getCaptcha:function(e){var t=this,a=this.captchaState[e];this.$refs.changeMobile.validateField(e,(function(s){s||(a.sendBtn=!0,t.$WebApi.user["SendVerification"]({sPhoneNum:t.changeMobileFormModel[e]}).then((function(e){"短信发送失败！"===e?t.$message.error("短信发送失败!60秒后再验证"):t.$message.success("短信发送成功!");var s=window.setInterval((function(){a.time--<=0&&(a.time=60,a.sendBtn=!1,window.clearInterval(s))}),1e3)})).catch((function(e){})))}))},next:function(){if(0===this.current)this.GetByValidate(this.changeMobileFormModel.initMobile,this.changeMobileFormModel.captcha);else{var e=!0;this.$refs.changeMobile.validateField(["initMobile","captcha"],(function(t){t&&(e=!1)})),e&&this.current++}},handleAllSubmit:function(){var e=this;this.$WebApi.user["GetByValidate"]({data:JSON.stringify({sValidate:this.changeMobileFormModel.captcha2,sMobile:this.changeMobileFormModel.newMobile})}).then((function(t){t.code&&998===t.code?e.$message.error(t.desc):e.$refs.changeMobile.validate((function(t){if(t){e.submitting=!0;var a={oldMobileNo:e.changeMobileFormModel.initMobile,validate1:e.changeMobileFormModel.captcha,newMobileNo:e.changeMobileFormModel.newMobile,validate2:e.changeMobileFormModel.captcha2,userid:e.$store.state.user.user.userID};e.$WebApi.user["transferAccountInfo"]({data:a}).then((function(t){t.code&&998===t.code?e.$message.error(t.desc):(e.$message.success("手机号码修改成功",2),e.$store.state.user.user.MOBILEPHONE=e.changeMobileFormModel.newMobile,e.handleModalHide(),e.hadleRefresh(),e.submitting=!1)})).catch((function(t){e.submitting=!1}))}}))})).catch((function(e){})).then((function(){}))},GetByValidate:function(e,t){var a=this;this.$WebApi.user["GetByValidate"]({data:JSON.stringify({sValidate:t,sMobile:e})}).then((function(e){e.code&&998===e.code?a.$message.error(e.desc):(a.$refs.changeMobile.validateField(["initMobile","captcha"],(function(e){})),a.current++)})).catch((function(e){})).then((function(){}))},hadleRefresh:function(){var e=this;d["a"].reloadComponent(e)}}},h=m,p=(a("898b"),a("2877")),g=Object(p["a"])(h,l,c,!1,null,"6dd8dc68",null),b=g.exports,f=a("5880"),v={0:"低",1:"低",2:"中",3:"强"},w={0:"error",1:"error",2:"warning",3:"success"},M={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},C={components:{ChangeMobileForm:b},props:{},data:function(){return{ChangePasswordVisible:!1,confirmLoading:!1,ChangeMobleVisible:!1,ChangeEmailVisible:!1,ChangeCompanyNameVisible:!1,data:[],phoneNum:String,state:{time:60,smsSendBtn:!1,CPTime:60,CPSmsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},changeMobleForm:this.$form.createForm(this),changeEmailForm:this.$form.createForm(this,{name:"dynamic_rule"}),passwordForm:this.$form.createForm(this,{name:"changePassword"}),changeCompanyNameForm:this.$form.createForm(this)}},created:function(){},computed:Object(r["a"])(Object(r["a"])({},Object(f["mapGetters"])({user:"userInfo"})),{},{setNumber:function(){var e=this.$store.state.user.user.MOBILEPHONE||"";return e.substr(0,3)+"****"+e.substr(parseInt(e.split("").length/2+2),e.split("").length)},setMailBox:function(){var e=this.$store.state.user.user.MAILBOX||"";return e.substr(0,3)+"****"+e.substr(parseInt(e.split("").length/2+2),e.split("").length)},setCompanyName:function(){var e=this.$store.state.user.user.DWMC||"";return e},setDWDZ:function(){var e=this.$store.state.user.user.DWDZ||"";return e},setLXR:function(){var e=this.$store.state.user.user.LXR||"";return e},passwordLevelClass:function(){return w[this.state.passwordLevel]},passwordLevelName:function(){return v[this.state.passwordLevel]},passwordLevelColor:function(){return M[this.state.passwordLevel]}}),mounted:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(f["mapActions"])(["Logout"])),{},{changePassword:function(){this.ChangePasswordVisible=!0},changeMobilePhone:function(){this.ChangeMobleVisible=!0},changeMailBox:function(){this.ChangeEmailVisible=!0},EmailHandleOk:function(){},onEmailSubmit:function(e){var t=this;e.preventDefault(),this.changeEmailForm.validateFields((function(e,a){var s=t.$store.state.user.user;if(!e){var i={userid:s.userID,mailbox:a.newEmail,mobilePhone:s.MOBILEPHONE,validate:a.captcha};t.$WebApi.user["changeMailBox"]({data:i}).then((function(e){998===e.code?(t.logging=!1,t.$message.error("邮箱修改失败，请检查手机验证码是否正确！")):(t.ChangeEmailVisible=!1,t.$message.success("邮箱修改成功",2),t.$store.state.user.user.MAILBOX=a.newEmail)})).catch((function(e){}))}}))},EmailHandleCancel:function(){this.ChangeEmailVisible=!1},handleOk:function(e){var t=this;this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,e.preventDefault(),setTimeout((function(){t.visible=!1,t.confirmLoading=!1}),2e3)},getCaptcha:function(){var e=this,t=this.state;this.phoneNum=this.$store.state.user.user.MOBILEPHONE,t.CPSmsSendBtn=!0,this.$WebApi.user["SendVerification"]({sPhoneNum:this.phoneNum}).then((function(a){"短信发送失败！"===a?e.$message.error("短信发送失败!60秒后再验证"):e.$message.success("短信发送成功!");var s=window.setInterval((function(){t.CPTime--<=0&&(t.CPTime=60,t.CPSmsSendBtn=!1,window.clearInterval(s))}),1e3)})).catch((function(a){clearInterval(interval2),t.CPTime=60,e.$message.error("短信发送失败，请查看网络接口问题"),t.CPSmsSendBtn=!1,e.requestFailed(a)}))},getCaptcha2:function(){var e=this,t=this.state;this.newMobleNum=this.changeMobleForm.getFieldValue("newMobile"),t.smsSendBtn=!0,this.$WebApi.user["SendVerification"]({sPhoneNum:this.newMobleNum}).then((function(a){"短信发送失败！"===a?e.$message.error("短信发送失败!60秒后再验证"):e.$message.success("短信发送成功!");var s=window.setInterval((function(){t.time--<=0&&(t.time=60,t.smsSendBtn=!1,window.clearInterval(s))}),1e3)})).catch((function(a){clearInterval(interval2),t.time=60,e.$message.error("短信发送失败，请查看网络接口问题"),t.smsSendBtn=!1,e.requestFailed(a)}))},onChangePasswordSubmit:function(e){var t=this;e.preventDefault(),this.passwordForm.validateFields((function(e,a){if(!e){t.confirmLoading=!0;var s={oldPassword:o()(a.oldPassword),newPassword:o()(a.newPassword),mobilePhone:t.$store.state.user.user.MOBILEPHONE,validate:a.captcha};t.$WebApi.user["changePasswordEx"]({data:s}).then((function(e){998===e.code?(t.confirmLoading=!1,t.$message.error(e.desc)):(t.confirmLoading=!1,t.ChangePasswordVisible=!1,t.$store.dispatch("Logout",t.user.TICKET),window.sessionStorage.setItem("islogin",!1),t.$router.push("/portal/home"),t.$message.success("密码修改成功",2))})).catch((function(e){}))}}))},handleCancel:function(e){this.ChangePasswordVisible=!1},changeProUser:function(){this.ChangeCompanyNameVisible=!0},CompanyNameHandleCancel:function(){this.ChangeCompanyNameVisible=!1},onCompanyNameSubmit:function(e){var t=this;e.preventDefault(),this.changeCompanyNameForm.validateFields((function(e,a){if(!e){var s={LOGINNAME:t.$store.state.user.user.LOGINNAME,DWMC:a.companyName,DWDZ:a.DWDZ,LXR:a.LXR};t.$WebApi.user["updateProUser"]({data:s}).then((function(e){998===e.code?t.logging=!1:(t.ChangeCompanyNameVisible=!1,t.$message.success("单位名称修改成功",2),t.$store.state.user.user.DWMC=a.companyName,t.$store.state.user.user.DWDZ=a.DWDZ,t.$store.state.user.user.LXR=a.LXR)})).catch((function(e){}))}}))},handlePasswordLevel:function(e,t,a){var s=0;/[0-9]/.test(t)&&s++,/[a-zA-Z]/.test(t)&&s++,/[^0-9a-zA-Z_]/.test(t)&&s++,this.state.passwordLevel=s,this.state.percent=30*s,s>=2?s>=3&&(this.state.percent=100):0===s&&(this.state.percent=10),a()},handlePasswordCheck:function(e,t,a){var s=this.passwordForm.getFieldValue("newPassword");void 0===t&&a(new Error("请输入密码")),t&&s&&t.trim()!==s.trim()&&a(new Error("两次密码不一致")),a()},handlePasswordVerify:function(e,t,a){t&&Object(u["b"])(t)?a():a(new Error("只能输入6-20个字母、数字、下划线"))},handlePhoneCheck:function(e,t,a){a()},handlePasswordInputClick:function(){this.state.passwordLevelChecked=!0}})},y=C,P=(a("185c"),Object(p["a"])(y,s,i,!1,null,"07dc5bcb",null));t["default"]=P.exports},"898b":function(e,t,a){"use strict";a("2d2b")},be7d:function(e,t,a){},ed08:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));a("4de4"),a("d81d"),a("45fc");var s={handleResultTableData:function(e){var t=[],a=[],s=[];return Array.isArray(e)?(t=e[0].tableResults.columns,a=e[0].tableResults.hideColumns,s=e[0].tableResults.rowsList):Window._.isPlainObject(e)&&e.hasOwnProperty("tableResults")?(t=e.tableResults.columns,a=e.tableResults.hideColumns,s=e.tableResults.rowsList):(t=e.columns,a=e.hideColumns,s=e.rowsList),{columns:t,hideColumns:a,rowsList:s}},deleteHideColumns:function(e){var t=this.handleResultTableData(e),a=t.columns,s=t.hideColumns;t.rowsList;return a.filter((function(e){return!s.some((function(t){return t===e["key"]}))}))},handleColumns:function(e){var t=this.handleResultTableData(e),a=t.columns,s=t.hideColumns,i=(t.rowsList,a.filter((function(e){return!s.some((function(t){return e.key===t}))})));return i.map((function(e,t){return{dataIndex:e["key"],key:e["key"],scopedSlots:{customRender:e["key"]},title:e["label"]}}))},table2Desc:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=t,i=this.handleResultTableData(e),r=i.columns,n=i.hideColumns,o=i.rowsList,l=[];l=a?r.filter((function(e){return!n.some((function(t){return t===e["key"]}))})):r;var c=o.map((function(e,t){var a=[];return l.map((function(t,i){"textarea"===t.type?a.push({label:t.label,key:t.key,value:e[t.key],span:3}):a.push({label:t.label,key:t.key,value:e[t.key],span:s})})),a}));return c}},i={reloadComponent:function(e){var t=e.$route.path;e.$router.push({path:"/FixRouter",query:{path:t}})}}}}]);