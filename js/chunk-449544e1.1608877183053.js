(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-449544e1","chunk-3731a0cd","chunk-722fc792","chunk-75e40762","chunk-2d2307dd"],{"1db0":function(t,e,a){"use strict";a("495e")},"2d2f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{size:"small",columns:t.columns,"data-source":t.data?t.data:[],loading:t.tableLoading,pagination:!1,rowKey:function(t){return t["index"]}},scopedSlots:t._u([{key:"CLZT",fn:function(e,n){return["暂停中"!=e?a("span",[t._v(t._s(e))]):[t._v(" "+t._s(e)+" "),a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleWhy(n)}}},[t._v("【查看原因】")])]]}},{key:"CHDW",fn:function(e,n){return[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleGroupMore(n)}}},[t._v(t._s(e))])]}},{key:"CLBG",fn:function(e,n){return["未上传"===e?a("span",[t._v(t._s(e))]):"查看"===e?[n.CLBGFJ&&1==n.CLBGFJ.length?[a("a-button",{attrs:{type:"link",target:"_blank",href:n.CLBGFJ[0].FJURL}},[t._v("查看")])]:a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryCL(n.CLBGFJ)}}},[t._v("查看")]),n.CLQR&&"未确认"==n.CLQR?[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryReport(n,0)}}},[t._v("确认")])]:[t._v("已确认")]]:t._e()]}},{key:"CLHT",fn:function(e,n){return["未上传"===e?a("span",[t._v(t._s(e))]):"查看"===e?[n.CLHTFJ&&1==n.CLHTFJ.length?[a("a-button",{attrs:{type:"link",target:"_blank",href:n.CLHTFJ[0].FJURL}},[t._v("查看")])]:a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryCL(n.CLHTFJ)}}},[t._v("查看")]),n.HTQR&&"未确认"==n.HTQR?[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryReport(n,1)}}},[t._v("确认")])]:[t._v("已确认")]]:t._e()]}}])}),a("a-modal",{attrs:{title:t.modalData.title,maskClosable:!1,width:"40%",size:"small",footer:null},on:{ok:t.handleClztOk,cancel:t.handleClztCancle},model:{value:t.clztVisible,callback:function(e){t.clztVisible=e},expression:"clztVisible"}},[a("a-spin",{attrs:{spinning:t.modalSpinning,tip:"加载中..."}},[a("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[t._l(t.modalData["descArray"],(function(e,n){return["XGFJ"!=e["key"]&&"CLBG"!=e["key"]?a("a-descriptions-item",{key:n,attrs:{span:e["span"],label:e["label"]}},[t._v(t._s(e["value"]))]):t._e(),"XGFJ"==e["key"]?a("a-descriptions-item",{key:n,attrs:{span:e["span"],label:e["label"]}},t._l(e.value,(function(e,n){return a("p",{key:n},[a("a",{attrs:{type:"link",href:e.FJLJ,target:"_blank"}},[t._v(t._s(n+1)+"、"+t._s(e.FJMC))])])})),0):t._e(),"CLBG"==e["key"]?a("a-descriptions-item",{key:n,attrs:{span:e["span"],label:e["label"]}},t._l(e.value,(function(e,n){return a("p",{key:n},[a("span",[t._v(t._s(n+1)+"、"+t._s(e.FJMC))]),a("a-button",{attrs:{size:"small",type:"link",icon:"download",href:e.FJLJ,target:"_blank"}},[t._v("下载")])],1)})),0):t._e()]}))],2)],1)],1),a("a-modal",{attrs:{title:t.clbgData.title,maskClosable:!1,width:"40%",size:"small",centered:!0},on:{ok:t.handleClbgOk,cancel:t.handleClbgCancle},model:{value:t.clbgVisible,callback:function(e){t.clbgVisible=e},expression:"clbgVisible"}},[a("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[a("a-descriptions-item",{key:"1",attrs:{span:"3",label:"工程名称"}},[t._v(t._s(t.clbgObjArr.GCMC))]),a("a-descriptions-item",{key:"2",attrs:{span:"3",label:"工规证号"}},[t._v(t._s(t.clbgObjArr.GCBH))]),a("a-descriptions-item",{key:"3",attrs:{span:"3",label:"测量事项"}},[t._v(t._s(t.clbgObjArr.CLSX))]),a("a-descriptions-item",{key:"4",attrs:{span:"3",label:"测绘中介服务机构"}},[t._v(t._s(t.clbgObjArr.CHDW))]),a("a-descriptions-item",{key:"5",attrs:{span:"3",label:"建设单位"}},[t._v(t._s(t.clbgObjArr.WTDW))]),a("a-descriptions-item",{key:"6",attrs:{span:"3",label:"联系人"}},[t._v(t._s(t.clbgObjArr.LXR))]),a("a-descriptions-item",{key:"7",attrs:{span:"3",label:"联系电话"}},[a("a-row",[a("a-col",{attrs:{span:"8"}},[a("span",[t._v(t._s(t.clbgObjArr.LXDH))])]),a("a-col",{attrs:{span:"14"}},[a("a-input",{model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}},[a("a-button",{attrs:{slot:"addonAfter",size:"small",type:"link",disabled:t.state.smsSendBtn},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}},slot:"addonAfter"},[t._v(t._s(t.state.smsSendBtn?t.state.time+" s":"获取短信验证码"))])],1)],1)],1)],1),a("a-descriptions-item",{key:"8",attrs:{span:3,label:""}},[t._l(t.clbgObjArr.CLBGFJ,(function(e,n){return[a("div",{key:n},[a("a",{attrs:{type:"link",target:"_blank",href:e.FJURL}},[t._v(t._s(e.FJNAME))])])]}))],2)],1),a("div",{staticStyle:{"text-align":"center","margin-top":"4px"}},[a("span",[t._v("填入验证码后，点击确认按钮，完成确认")])])],1),a("a-modal",{attrs:{title:t.clbgfjData.title,maskClosable:!1,width:"40%",size:"small",footer:null},on:{ok:t.handleClbgfjOk,cancel:t.handleClbgfjCancle},model:{value:t.clbgfjVisible,callback:function(e){t.clbgfjVisible=e},expression:"clbgfjVisible"}},[a("div",{staticClass:"clbgfj",attrs:{id:"clbgfj"}},[a("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[t.clbgfjData["descArray"]&&t.clbgfjData["descArray"].length>0?[t._l(t.clbgfjData["descArray"],(function(e,n){return[a("a-descriptions-item",{key:n,attrs:{span:"3",label:e.label}},[a("a",{attrs:{href:e.value,target:"_blank"}},[t._v("下载")])])]}))]:t._e()],2)],1)])],1)},s=[],l=(a("4de4"),a("d81d"),a("45fc"),a("5530")),i={name:"BusiTable",components:{},props:{tableData:{default:function(){},type:Object,required:!0}},data:function(){return{data:[],columns:[],tableLoading:!1,clztVisible:!1,clbgVisible:!1,clbgfjVisible:!1,modalData:{title:"",descArray:[]},clbgData:{title:"确认测量报告",descArray:[]},clbgfjData:{title:"查看测量报告",descArray:[]},clbgObjArr:{},modalSpinning:!1,tableId:"",tableCLSX:"",tableChdw:"",captcha:null,state:{smsSendBtn:!1,time:60},clnum:0}},computed:{},watch:{tableData:function(t,e){this._.isEmpty(t)||(this.tableLoading=!0,this.columns=this.getTableColumn(this.tableData),this.data=this.getTableData(this.tableData),this.tableLoading=!1)}},created:function(){},mounted:function(){this.columns=this.getTableColumn(this.tableData),this.data=this.getTableData(this.tableData)},inject:["busiProReload"],methods:{getTableColumn:function(t){if(this._.isEmpty(t))return{};var e=t.columns,a=t.hideColumns,n=e.filter((function(t){return!a.some((function(e){return e===t.key}))})),s=n.map((function(t,e){return{dataIndex:t["key"],key:t["key"],title:t["label"],scopedSlots:{customRender:t["key"]}}}));return s},getTableData:function(t){var e=[];if(this._.isEmpty(t))e=[];else{var a=t.rowsList;e=a.map((function(t,e){var a=[],n=[],s=[];for(var i in t)"names"===i&&(a=t[i]),"urls"===i&&(n=t[i]);return a.map((function(t,e){s.push({name:t,url:n[e]})})),Object(l["a"])(Object(l["a"])({},t),{},{index:e})}))}return e},GetPauseReason:function(){var t=this;this.modalSpinning=!0,this.$WebApi.busiProcess["GetPauseReason"]({table001id:this.tableId,clsx:this.tableCLSX}).then((function(e){var a=e;t._.isEmpty(a)||(t.modalData=t.handlePauseReason(a)),t.modalSpinning=!1})).catch((function(e){t.modalSpinning=!1}))},GetSurveyCompanyInfo:function(){var t=this;this.modalSpinning=!0,this.$WebApi.busiProcess["GetSurveyCompanyInfo"]({chdw:this.tableChdw}).then((function(e){var a=e;t._.isEmpty(a)||(t.modalData=t.handleSurveyCompanyInfo(a)),t.modalSpinning=!1})).catch((function(e){t.modalSpinning=!1}))},GetSurveyReport:function(){var t=this;this.modalSpinning=!0,this.$WebApi.busiProcess["GetSurveyReport"]({table008id:this.tableId}).then((function(e){var a=e;t._.isEmpty(a)||(t.modalData=t.handleSurveyReport(a)),t.modalSpinning=!1})).catch((function(e){t.modalSpinning=!1}))},handleSurveyReport:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&("CHDW"===a&&e.push({label:"测绘中介服务机构",value:t[a],key:a,span:3}),"CLBG"===a&&e.push({label:"测量报告",value:t[a],key:a,span:3}),"CLSX"===a&&e.push({label:"测量事项",value:t[a],key:a,span:3}),"SCSJ"===a&&e.push({label:"上传时间",value:t[a],key:a,span:3}));return{title:"查看测量报告",descArray:e}},handleSurveyCompanyInfo:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&("DWDZ"===a&&e.push({label:"单位地址",value:t[a],key:a,span:3}),"DWMC"===a&&e.push({label:"单位名称",value:t[a],key:a,span:3}),"LXDH"===a&&e.push({label:"联系电话",value:t[a],key:a,span:3}),"LXR"===a&&e.push({label:"联系人",value:t[a],key:a,span:3}));return{title:"测绘服务机构信息",descArray:e}},handlePauseReason:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&("CLDW"===a&&e.push({label:"测绘中介服务机构",value:t[a],key:a,span:3}),"CLSX"===a&&e.push({label:"测量事项",value:t[a],key:a,span:3}),"LJYZT"===a&&e.push({label:"累计已暂停",value:t[a],key:a,span:3}),"XGFJ"===a&&e.push({label:"相关附件",value:t[a],key:a,span:3}),"ZTSJ"===a&&e.push({label:"暂停时间",value:t[a],key:a,span:3}),"ZTYY"===a&&e.push({label:"暂停原因",value:t[a],key:a,span:3}));return{title:"查看暂停原因",descArray:e}},handleWhy:function(t){this.tableId=t["TABLE001ID"],this.tableCLSX=t["CLSX"],this.GetPauseReason(),this.clztVisible=!0},handleGroupMore:function(t){this.tableChdw=t["CHDW"],this.GetSurveyCompanyInfo(),this.clztVisible=!0},handleQueryReport:function(t,e){this.clnum=e,0===e?this.clbgData.title="确认测量报告":1===e&&(this.clbgData.title="确认测量合同"),this.tableId=t["TABLE008ID"],this.GetSurveyReport(),this.clbgObjArr=t,this.clbgVisible=!0},handleClztOk:function(){this.clztVisible=!1},handleClztCancle:function(){this.clztVisible=!1},handleClbgOk:function(){var t=this,e=this.clbgObjArr.CLSX,a=this.clbgObjArr.LXDH,n=this.clbgObjArr.TABLE001ID,s=this.clbgObjArr.TABLE008ID,l=this.captcha,i="";0===this.clnum?i="QueryProgress":1===this.clnum&&(i="ClhtConfirm"),this._.isEmpty(l)?this.$message.warning("请输入验证码！"):(this.$WebApi.busiProcess[i]({clsx:e,lxdh:a,table001id:n,table008id:s,captcha:l}).then((function(e){e.code&&998===e.code?t.$message.warning(e.desc):(t.$message.success("您已成功确认！"),t.busiProReload())})).catch((function(e){t.$message.error("您确认操作失败！")})),this.clbgVisible=!1)},handleClbgCancle:function(){this.clbgVisible=!1},getCaptcha:function(t){var e=this;t.preventDefault(),this.$WebApi.user["SendVerification"]({sPhoneNum:this.clbgObjArr.LXDH}).then((function(t){e.state.smsSendBtn=!0,"短信发送失败！"===t?e.$message.error("短信发送失败!60秒后再验证"):e.$message.success("短信发送成功!");var a=window.setInterval((function(){e.state.time--<=0&&(e.state.time=60,e.state.smsSendBtn=!1,window.clearInterval(a))}),1e3)})).catch((function(t){}))},handleClbgfjOk:function(){this.clbgfjVisible=!1},handleClbgfjCancle:function(){this.clbgfjVisible=!1},handleQueryCL:function(t){var e=t.map((function(t,e){return{label:t.FJNAME,value:t.FJURL}}));this.$set(this.clbgfjData,"descArray",e),this.clbgfjVisible=!0}}},r=i,u=(a("9d64"),a("2877")),o=Object(u["a"])(r,n,s,!1,null,"51b5a6de",null);e["default"]=o.exports},"3f09":function(t,e,a){},"495e":function(t,e,a){},6191:function(t,e,a){},"74ce":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{staticClass:"businessProcessLayout"},[a("a-skeleton",{attrs:{active:"",paragraph:{rows:t.skeletonRow},loading:t.onSpinning,tip:"正在加载...",spinning:t.onSpinning}},[t.listData&&t.listData.length>0?[a("busi-descriptions",{attrs:{listData:t.listData,tableFid:t.tableFid,titleFid:t.titleFid},scopedSlots:t._u([{key:"descTitle",fn:function(e){return[t._l(e.currentList,(function(n,s){return["SQBH"==n.key?a("a-col",{key:s,attrs:{span:8}},[t._v(t._s(n.label)+": "+t._s(n.value||"-")+" ")]):t._e(),"GCMC"==n.key?a("a-col",{key:s,attrs:{span:8}},[t._v(t._s(n.label)+": "+t._s(n.value||"-")+" ")]):t._e(),"DQZT"==n.key?a("a-col",{key:s,attrs:{span:8}},[t._v(" "+t._s(n.label)+": "),["未提交"==n.value?a("a-tag",{staticClass:"unSubmit"},[t._v(t._s(n.value))]):"测量完成"==n.value?a("a-tag",{staticClass:"survey-done"},[t._v(t._s(n.value))]):"预约未成功"==n.value?a("a-tag",{staticClass:"reserve-fail"},[t._v(t._s(n.value))]):a("a-tag",{staticClass:"other"},[t._v(t._s(n.value))])],"未提交"==n.value?a("a-button",{staticClass:"optBtn",attrs:{size:"small",type:"danger",ghost:""},on:{click:function(a){return t.handleDeleteItem(e.currentList)}}},[t._v("删除 ")]):t._e(),"未提交"==n.value?a("a-button",{staticClass:"optBtn",attrs:{size:"small",type:"default"},on:{click:function(a){return t.handelEditAgain(e.currentList)}}},[t._v("编辑 ")]):t._e()],2):t._e()]}))]}},{key:"table",fn:function(t){return[a("busi-table",{attrs:{tableData:t.tableData}})]}}],null,!1,3650024547)})]:a("s-empty")],2),a("a-back-top")],1)},s=[],l=(a("d81d"),a("5530")),i=a("5880"),r=a("ed08"),u=a("2d2f"),o=a("e0ea"),c=a("b405"),d={name:"BusiOnProcess",components:{"busi-table":u["default"],"busi-descriptions":o["default"],"s-empty":c["default"]},props:{},data:function(){return{activeKey:0,onSpinning:!1,listData:[],skeletonRow:4,tableFid:["JFQDLIST","CGQDLIST","FJCLQDLIST"],titleFid:["SQBH","GCMC","DQZT"]}},computed:Object(l["a"])({},Object(i["mapGetters"])({user:"userInfo"})),created:function(){},mounted:function(){this.QueryEntrust()},provide:function(){return{reload:this.QueryEntrust()}},methods:{tabChange:function(t){switch(t){case 0:this.QueryEntrust();break;case 1:this.QueryEntrust(1);break;case 2:this.QueryEntrust(2);break;default:break}},QueryEntrust:function(t){var e=this;this.listData=[],this.onSpinning=!0,this.$WebApi.busiProcess["QueryEntrust"]({type:t,userid:this.user.userID}).then((function(t){var a=r["b"].table2Desc(t);e.listData=a,e.onSpinning=!1})).catch((function(t){e.onSpinning=!1}))},handelEditAgain:function(t){var e;t.map((function(t,a){"RID"===t["key"]&&(e=t["value"])})),this.$router.push({name:"preBusiness",params:{docunid:e}})},handleDeleteItem:function(t){var e;t.map((function(t,a){"RID"===t["key"]&&(e=t["value"])})),this.DeleteTemporarilyByCode(e)},DeleteTemporarilyByCode:function(t){var e=this;this.$WebApi.busiProcess["DeleteTemporarilyByCode"]({code:t,userid:this.user.userID}).then((function(t){e.$message.success("删除成功！"),e.QueryEntrust()})).catch((function(t){e.$message.error("删除失败！")}))}}},b=d,p=(a("1db0"),a("2877")),h=Object(p["a"])(b,n,s,!1,null,"3e5c1d2e",null);e["default"]=h.exports},"9d64":function(t,e,a){"use strict";a("6191")},a261:function(t,e,a){"use strict";a("3f09")},b405:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-empty",{attrs:{image:t.imgPath,"image-style":{height:t.height}}},[a("span",{attrs:{slot:"description"},slot:"description"})])},s=[],l={name:"SEmpty",components:{},props:{height:{default:"100%",type:String}},data:function(){return{imgPath:a("f3f6")}},computed:{},watch:{},created:function(){},methods:{}},i=l,r=a("2877"),u=Object(r["a"])(i,n,s,!1,null,"138622d4",null);e["default"]=u.exports},e0ea:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"busiDesc"},t._l(t.listData,(function(e,n){return a("div",{key:n},[a("a-card",{attrs:{title:"",bordered:!1,size:"small"}},[a("a-descriptions",{attrs:{size:"small",bordered:""}},[a("a-row",{attrs:{slot:"title"},slot:"title"},[t._t("descTitle",null,{currentList:e})],2),t._l(e,(function(e,n){return[-1===t.hideFid.indexOf(e.key)&&-1===t.titleFid.indexOf(e.key)&&-1===t.tableFid.indexOf(e.key)&&"RID"!=e.key?a("a-descriptions-item",{key:n,attrs:{label:e.label,span:e.span}},[t._v(t._s(e.value||"-")+" ")]):t._e()]})),t._t("hideFid")],2),t._l(e,(function(e,n){return[-1!==t.tableFid.indexOf(e.key)&&"JFQDLIST"!=e.key?[e.value["rowsList"]&&e.value["rowsList"].length>0?a("div",{key:n},[a("div",{staticClass:"wtsxClass"},[t._v(" "+t._s(e.label)+" ")]),t._t("table",null,{tableData:e.value})],2):t._e()]:t._e(),-1!==t.tableFid.indexOf(e.key)&&"JFQDLIST"===e.key?[e.value["JFQD"]&&e.value["JFQD"]["rowsList"]&&e.value["JFQD"]["rowsList"].length>0?a("div",{key:n},[a("div",{staticClass:"wtsxClass"},[t._v(" "+t._s(e.label)+" ")]),a("div",[t._v("TODO:后期在进度里也可以直接缴费")]),t._t("table",null,{tableData:e.value["JFQD"]})],2):t._e()]:t._e()]}))],2)],1)})),0)},s=[],l={name:"BusiDescriptions",components:{},props:{listData:{default:function(){return[]},type:Array,required:!0},tableFid:{default:function(){return[]},type:Array,required:!0},titleFid:{default:function(){return["XMBH","DQZT","WTRQ","RID"]},type:Array,required:!1},hideFid:{default:function(){return[]},type:Array,required:!1}},data:function(){return{}},computed:{},watch:{tableData:{handler:function(t,e){this._.isEmpty(t)},deep:!0}},created:function(){},methods:{}},i=l,r=(a("a261"),a("2877")),u=Object(r["a"])(i,n,s,!1,null,"3641dc1c",null);e["default"]=u.exports},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));a("4de4"),a("d81d"),a("45fc");var n={handleResultTableData:function(t){var e=[],a=[],n=[];return Array.isArray(t)?(e=t[0].tableResults.columns,a=t[0].tableResults.hideColumns,n=t[0].tableResults.rowsList):Window._.isPlainObject(t)&&t.hasOwnProperty("tableResults")?(e=t.tableResults.columns,a=t.tableResults.hideColumns,n=t.tableResults.rowsList):(e=t.columns,a=t.hideColumns,n=t.rowsList),{columns:e,hideColumns:a,rowsList:n}},deleteHideColumns:function(t){var e=this.handleResultTableData(t),a=e.columns,n=e.hideColumns;e.rowsList;return a.filter((function(t){return!n.some((function(e){return e===t["key"]}))}))},handleColumns:function(t){var e=this.handleResultTableData(t),a=e.columns,n=e.hideColumns,s=(e.rowsList,a.filter((function(t){return!n.some((function(e){return t.key===e}))})));return s.map((function(t,e){return{dataIndex:t["key"],key:t["key"],scopedSlots:{customRender:t["key"]},title:t["label"]}}))},table2Desc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e,s=this.handleResultTableData(t),l=s.columns,i=s.hideColumns,r=s.rowsList,u=[];u=a?l.filter((function(t){return!i.some((function(e){return e===t["key"]}))})):l;var o=r.map((function(t,e){var a=[];return u.map((function(e,s){"textarea"===e.type?a.push({label:e.label,key:e.key,value:t[e.key],span:3}):a.push({label:e.label,key:e.key,value:t[e.key],span:n})})),a}));return o}},s={reloadComponent:function(t){var e=t.$route.path;t.$router.push({path:"/FixRouter",query:{path:e}})}}},f3f6:function(t,e,a){t.exports=a.p+"img/empty.eb1f7831.png"}}]);