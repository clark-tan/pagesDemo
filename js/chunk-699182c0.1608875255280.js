(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-699182c0","chunk-45fd51f9","chunk-75e40762","chunk-2d2307dd"],{"0dac":function(t,e,a){"use strict";a("c810")},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return i(t)||s(t)||Object(r["a"])(t)||o()}},"3a85":function(t,e,a){"use strict";a("9aba")},"4c6d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{size:"small",columns:t.columns,"data-source":t.data,loading:t.tableLoading,pagination:t.pagination,rowKey:function(t){return t["tableIndex"]},expandedRowKeys:t.expandedRowKeys},on:{expandedRowsChange:t.expandedRowsChange},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e){return[e.FJLIST&&e.FJLIST.length>0?[t._l(e.FJLIST,(function(n,i){return[a("a-row",{key:i,style:{marginBottom:"4px",textAlign:"left",background:"#E6F7FF"}},[a("a-col",{staticStyle:{left:"45px"},attrs:{span:"18"}},[a("a",{style:{marginRight:"10px"},attrs:{href:n.FJURL,target:"_blank"}},[t._v(t._s(n.FJNAME||"-"))])]),a("a-col",{staticStyle:{"text-align":"right",right:"40px"},attrs:{span:"6"}},[0==t.disabled?a("a-button",{attrs:{type:"link",size:"small"},on:{click:function(a){return t.deleteFile(e,i)}}},[t._v("删除")]):t._e()],1)],1)]}))]:a("s-empty")]}},{key:"action",fn:function(e,n){return[a("a-upload",{attrs:{action:t.MaterialUpload,multiple:!0,"file-list":n.action,showUploadList:!1},on:{change:function(e){return t.handleChange(e,n)}}},[a("a-button",{attrs:{size:"small",type:"primary",icon:"upload"}})],1)]}}])})],1)},i=[],s=(a("d81d"),a("a434"),a("2909")),r=a("5530"),o=a("377c"),l=a("ed08"),u=a("b405"),d={name:"UploadTable",components:{"s-empty":u["default"]},props:{tableData:{default:function(){},type:Object,required:!0},disabled:{default:!1,type:Boolean,required:!1},pagination:{default:!1,type:Boolean,required:!1}},data:function(){return{showTemplate:!0,data:[],columns:[],tableLoading:!1,MaterialUpload:o["K"],expandedRowKeys:[]}},computed:{},watch:{tableData:{handler:function(t,e){if(!this._.isEmpty(t)){this.tableLoading=!0;var a=JSON.parse(JSON.stringify(this.tableData));this.columns=this.getTableColumn(a),this.data=this.getTableData(a),this.handleExpandedRows(),this.tableLoading=!1}},immediate:!0,deep:!0}},created:function(){},mounted:function(){},methods:{getTableColumn:function(t){if(this._.isEmpty(t))return{};var e=l["b"].handleColumns(t);return e.push({dataIndex:"action",key:"action",title:"操作",scopedSlots:{customRender:"action"}}),e},getTableData:function(t){var e=[];if(this._.isEmpty(t))e=[];else{var a=t.rowsList;a&&(e=a.map((function(t,e){return Object(r["a"])(Object(r["a"])({},t),{},{tableIndex:e,action:[]})})))}return e},handleChange:function(t,e){var a=Object(s["a"])(t.fileList),n=t.file;n.response&&"done"===n.status?0===n.response.code?(e.FJLIST.push({FJNAME:n.response.data[0].fileName,FJURL:n.response.data[0].fileUrl}),this.expandedRowKeys.push(e.tableIndex)):this.$message.error("文件上传失败！"):"error"===n.status&&this.$message.error("文件上传失败！"),a=a.map((function(t){return t.response&&"done"===t.status&&t.response.code,t})),e.action=a},deleteFile:function(t,e){t.FJLIST.splice(e,1),t.FJLIST&&0===t.FJLIST.length&&(this.expandedRowKeys=[])},getSubmitData:function(){var t=JSON.parse(JSON.stringify(this.data));return t.map((function(t,e){return delete t.tableIndex,delete t.action,t}))},isAllSubmit:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!0;return this.data&&this.data.length>0?this.data.map((function(a,n){t?a.FJLIST.length<=0&&a.SFBX&&"是"===a.SFBX&&(e=!1):a.FJLIST.length<=0&&(e=!1)})):e=!1,e},handleExpandedRows:function(){var t=this;this.data.map((function(e,a){e.FJLIST&&e.FJLIST.length>0&&t.expandedRowKeys.push(e.tableIndex)}))},expandedRowsChange:function(t){this.expandedRowKeys=t}}},c=d,p=(a("0dac"),a("2877")),f=Object(p["a"])(c,n,i,!1,null,"681a6d02",null);e["default"]=f.exports},"82da":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FileTable"},[a("div",{staticClass:"content"},[a("upload-table",{ref:"uploadTable",attrs:{tableData:t.tableData,disabled:!1}})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"my-button"},[t._.isEmpty(t.permission.isTemporarySave)&&!0===t.permission.isTemporarySave?[a("a-button",{attrs:{type:"primary"},on:{click:t.saveCurrentData}},[t._v("暂存")])]:t._e(),a("a-button",{on:{click:function(e){return t.handleTableData(-1)}}},[t._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleTableData(1)}}},[t._v(t._s(t.isLast?"提交申请":"下一步"))])],2)])])},i=[],s=(a("a15b"),a("d81d"),a("4c6d")),r={name:"FileTable",components:{"upload-table":s["default"]},props:{isLast:{default:!1,type:Boolean,required:!0},permission:{default:function(){},type:Object,required:!0},remoteData:{default:function(){},type:Object,required:!1}},data:function(){return{tableData:{columns:[],hideColumns:[],rowsList:[]},submitData:[]}},computed:{},watch:{remoteData:{handler:function(t,e){},immediate:!0,deep:!0},"$store.state.preBusniess.HandlePreBusniessState":function(){var t=this.$store.state.preBusniess.SaveData;if(t){var e=t["saveData"],a=t["ischange"];if(e&&e.length>0){var n=[];e.map((function(t,e){if(t.clsx&&t.clsx.length>0){var a=t.clsx[t.clsx.length-1];Window._.isEmpty(a)||n.push(a)}})),this.GetProvideFileList(n.join(";"),a)}}}},mounted:function(){},methods:{GetProvideFileList:function(t,e){var a=this;this.$WebApi.preBusiness["GetProvideFileList"]({sWTSX:t}).then((function(t){t["rowsList"]&&t["rowsList"].length>0&&(a.tableData=t,e||a.$set(a.tableData,"rowsList",a.remoteData.files))})).catch((function(t){}))},handleTableData:function(t){1===t?this.isEnableSubmit()&&this.$emit("currentStepOK",{componentName:"OtherTable",num:t}):this.$emit("currentStepOK",{componentName:"OtherTable",num:t})},isEnableSubmit:function(){var t=!0;return this.$refs.uploadTable.isAllSubmit(!0)||(t=!1),t||this.$message.error("材料上传失败"),t},getSubmitData:function(){return{files:this.$refs.uploadTable.getSubmitData()}},saveCurrentData:function(){this.$emit("saveAllData")},fillData2form:function(t){}}},o=r,l=(a("3a85"),a("2877")),u=Object(l["a"])(o,n,i,!1,null,"77d0fd88",null);e["default"]=u.exports},"9aba":function(t,e,a){},b405:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-empty",{attrs:{image:t.imgPath,"image-style":{height:t.height}}},[a("span",{attrs:{slot:"description"},slot:"description"})])},i=[],s={name:"SEmpty",components:{},props:{height:{default:"100%",type:String}},data:function(){return{imgPath:a("f3f6")}},computed:{},watch:{},created:function(){},methods:{}},r=s,o=a("2877"),l=Object(o["a"])(r,n,i,!1,null,"138622d4",null);e["default"]=l.exports},c810:function(t,e,a){},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}));a("4de4"),a("d81d"),a("45fc");var n={handleResultTableData:function(t){var e=[],a=[],n=[];return Array.isArray(t)?(e=t[0].tableResults.columns,a=t[0].tableResults.hideColumns,n=t[0].tableResults.rowsList):Window._.isPlainObject(t)&&t.hasOwnProperty("tableResults")?(e=t.tableResults.columns,a=t.tableResults.hideColumns,n=t.tableResults.rowsList):(e=t.columns,a=t.hideColumns,n=t.rowsList),{columns:e,hideColumns:a,rowsList:n}},deleteHideColumns:function(t){var e=this.handleResultTableData(t),a=e.columns,n=e.hideColumns;e.rowsList;return a.filter((function(t){return!n.some((function(e){return e===t["key"]}))}))},handleColumns:function(t){var e=this.handleResultTableData(t),a=e.columns,n=e.hideColumns,i=(e.rowsList,a.filter((function(t){return!n.some((function(e){return t.key===e}))})));return i.map((function(t,e){return{dataIndex:t["key"],key:t["key"],scopedSlots:{customRender:t["key"]},title:t["label"]}}))},table2Desc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e,i=this.handleResultTableData(t),s=i.columns,r=i.hideColumns,o=i.rowsList,l=[];l=a?s.filter((function(t){return!r.some((function(e){return e===t["key"]}))})):s;var u=o.map((function(t,e){var a=[];return l.map((function(e,i){"textarea"===e.type?a.push({label:e.label,key:e.key,value:t[e.key],span:3}):a.push({label:e.label,key:e.key,value:t[e.key],span:n})})),a}));return u}},i={reloadComponent:function(t){var e=t.$route.path;t.$router.push({path:"/FixRouter",query:{path:e}})}}},f3f6:function(t,e,a){t.exports=a.p+"img/empty.eb1f7831.png"}}]);