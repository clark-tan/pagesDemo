(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3731a0cd"],{"2d2f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{size:"small",columns:t.columns,"data-source":t.data?t.data:[],loading:t.tableLoading,pagination:!1,rowKey:function(t){return t["index"]}},scopedSlots:t._u([{key:"CLZT",fn:function(e,n){return["暂停中"!=e?a("span",[t._v(t._s(e))]):[t._v(" "+t._s(e)+" "),a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleWhy(n)}}},[t._v("【查看原因】")])]]}},{key:"CHDW",fn:function(e,n){return[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleGroupMore(n)}}},[t._v(t._s(e))])]}},{key:"CLBG",fn:function(e,n){return["未上传"===e?a("span",[t._v(t._s(e))]):"查看"===e?[n.CLBGFJ&&1==n.CLBGFJ.length?[a("a-button",{attrs:{type:"link",target:"_blank",href:n.CLBGFJ[0].FJURL}},[t._v("查看")])]:a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryCL(n.CLBGFJ)}}},[t._v("查看")]),n.CLQR&&"未确认"==n.CLQR?[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryReport(n,0)}}},[t._v("确认")])]:[t._v("已确认")]]:t._e()]}},{key:"CLHT",fn:function(e,n){return["未上传"===e?a("span",[t._v(t._s(e))]):"查看"===e?[n.CLHTFJ&&1==n.CLHTFJ.length?[a("a-button",{attrs:{type:"link",target:"_blank",href:n.CLHTFJ[0].FJURL}},[t._v("查看")])]:a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryCL(n.CLHTFJ)}}},[t._v("查看")]),n.HTQR&&"未确认"==n.HTQR?[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.handleQueryReport(n,1)}}},[t._v("确认")])]:[t._v("已确认")]]:t._e()]}}])}),a("a-modal",{attrs:{title:t.modalData.title,maskClosable:!1,width:"40%",size:"small",footer:null},on:{ok:t.handleClztOk,cancel:t.handleClztCancle},model:{value:t.clztVisible,callback:function(e){t.clztVisible=e},expression:"clztVisible"}},[a("a-spin",{attrs:{spinning:t.modalSpinning,tip:"加载中..."}},[a("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[t._l(t.modalData["descArray"],(function(e,n){return["XGFJ"!=e["key"]&&"CLBG"!=e["key"]?a("a-descriptions-item",{key:n,attrs:{span:e["span"],label:e["label"]}},[t._v(t._s(e["value"]))]):t._e(),"XGFJ"==e["key"]?a("a-descriptions-item",{key:n,attrs:{span:e["span"],label:e["label"]}},t._l(e.value,(function(e,n){return a("p",{key:n},[a("a",{attrs:{type:"link",href:e.FJLJ,target:"_blank"}},[t._v(t._s(n+1)+"、"+t._s(e.FJMC))])])})),0):t._e(),"CLBG"==e["key"]?a("a-descriptions-item",{key:n,attrs:{span:e["span"],label:e["label"]}},t._l(e.value,(function(e,n){return a("p",{key:n},[a("span",[t._v(t._s(n+1)+"、"+t._s(e.FJMC))]),a("a-button",{attrs:{size:"small",type:"link",icon:"download",href:e.FJLJ,target:"_blank"}},[t._v("下载")])],1)})),0):t._e()]}))],2)],1)],1),a("a-modal",{attrs:{title:t.clbgData.title,maskClosable:!1,width:"40%",size:"small",centered:!0},on:{ok:t.handleClbgOk,cancel:t.handleClbgCancle},model:{value:t.clbgVisible,callback:function(e){t.clbgVisible=e},expression:"clbgVisible"}},[a("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[a("a-descriptions-item",{key:"1",attrs:{span:"3",label:"工程名称"}},[t._v(t._s(t.clbgObjArr.GCMC))]),a("a-descriptions-item",{key:"2",attrs:{span:"3",label:"工规证号"}},[t._v(t._s(t.clbgObjArr.GCBH))]),a("a-descriptions-item",{key:"3",attrs:{span:"3",label:"测量事项"}},[t._v(t._s(t.clbgObjArr.CLSX))]),a("a-descriptions-item",{key:"4",attrs:{span:"3",label:"测绘中介服务机构"}},[t._v(t._s(t.clbgObjArr.CHDW))]),a("a-descriptions-item",{key:"5",attrs:{span:"3",label:"建设单位"}},[t._v(t._s(t.clbgObjArr.WTDW))]),a("a-descriptions-item",{key:"6",attrs:{span:"3",label:"联系人"}},[t._v(t._s(t.clbgObjArr.LXR))]),a("a-descriptions-item",{key:"7",attrs:{span:"3",label:"联系电话"}},[a("a-row",[a("a-col",{attrs:{span:"8"}},[a("span",[t._v(t._s(t.clbgObjArr.LXDH))])]),a("a-col",{attrs:{span:"14"}},[a("a-input",{model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}},[a("a-button",{attrs:{slot:"addonAfter",size:"small",type:"link",disabled:t.state.smsSendBtn},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}},slot:"addonAfter"},[t._v(t._s(t.state.smsSendBtn?t.state.time+" s":"获取短信验证码"))])],1)],1)],1)],1),a("a-descriptions-item",{key:"8",attrs:{span:3,label:""}},[t._l(t.clbgObjArr.CLBGFJ,(function(e,n){return[a("div",{key:n},[a("a",{attrs:{type:"link",target:"_blank",href:e.FJURL}},[t._v(t._s(e.FJNAME))])])]}))],2)],1),a("div",{staticStyle:{"text-align":"center","margin-top":"4px"}},[a("span",[t._v("填入验证码后，点击确认按钮，完成确认")])])],1),a("a-modal",{attrs:{title:t.clbgfjData.title,maskClosable:!1,width:"40%",size:"small",footer:null},on:{ok:t.handleClbgfjOk,cancel:t.handleClbgfjCancle},model:{value:t.clbgfjVisible,callback:function(e){t.clbgfjVisible=e},expression:"clbgfjVisible"}},[a("div",{staticClass:"clbgfj",attrs:{id:"clbgfj"}},[a("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[t.clbgfjData["descArray"]&&t.clbgfjData["descArray"].length>0?[t._l(t.clbgfjData["descArray"],(function(e,n){return[a("a-descriptions-item",{key:n,attrs:{span:"3",label:e.label}},[a("a",{attrs:{href:e.value,target:"_blank"}},[t._v("下载")])])]}))]:t._e()],2)],1)])],1)},l=[],s=(a("4de4"),a("d81d"),a("45fc"),a("5530")),i={name:"BusiTable",components:{},props:{tableData:{default:function(){},type:Object,required:!0}},data:function(){return{data:[],columns:[],tableLoading:!1,clztVisible:!1,clbgVisible:!1,clbgfjVisible:!1,modalData:{title:"",descArray:[]},clbgData:{title:"确认测量报告",descArray:[]},clbgfjData:{title:"查看测量报告",descArray:[]},clbgObjArr:{},modalSpinning:!1,tableId:"",tableCLSX:"",tableChdw:"",captcha:null,state:{smsSendBtn:!1,time:60},clnum:0}},computed:{},watch:{tableData:function(t,e){this._.isEmpty(t)||(this.tableLoading=!0,this.columns=this.getTableColumn(this.tableData),this.data=this.getTableData(this.tableData),this.tableLoading=!1)}},created:function(){},mounted:function(){this.columns=this.getTableColumn(this.tableData),this.data=this.getTableData(this.tableData)},inject:["busiProReload"],methods:{getTableColumn:function(t){if(this._.isEmpty(t))return{};var e=t.columns,a=t.hideColumns,n=e.filter((function(t){return!a.some((function(e){return e===t.key}))})),l=n.map((function(t,e){return{dataIndex:t["key"],key:t["key"],title:t["label"],scopedSlots:{customRender:t["key"]}}}));return l},getTableData:function(t){var e=[];if(this._.isEmpty(t))e=[];else{var a=t.rowsList;e=a.map((function(t,e){var a=[],n=[],l=[];for(var i in t)"names"===i&&(a=t[i]),"urls"===i&&(n=t[i]);return a.map((function(t,e){l.push({name:t,url:n[e]})})),Object(s["a"])(Object(s["a"])({},t),{},{index:e})}))}return e},GetPauseReason:function(){var t=this;this.modalSpinning=!0,this.$WebApi.busiProcess["GetPauseReason"]({table001id:this.tableId,clsx:this.tableCLSX}).then((function(e){var a=e;t._.isEmpty(a)||(t.modalData=t.handlePauseReason(a)),t.modalSpinning=!1})).catch((function(e){t.modalSpinning=!1}))},GetSurveyCompanyInfo:function(){var t=this;this.modalSpinning=!0,this.$WebApi.busiProcess["GetSurveyCompanyInfo"]({chdw:this.tableChdw}).then((function(e){var a=e;t._.isEmpty(a)||(t.modalData=t.handleSurveyCompanyInfo(a)),t.modalSpinning=!1})).catch((function(e){t.modalSpinning=!1}))},GetSurveyReport:function(){var t=this;this.modalSpinning=!0,this.$WebApi.busiProcess["GetSurveyReport"]({table008id:this.tableId}).then((function(e){var a=e;t._.isEmpty(a)||(t.modalData=t.handleSurveyReport(a)),t.modalSpinning=!1})).catch((function(e){t.modalSpinning=!1}))},handleSurveyReport:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&("CHDW"===a&&e.push({label:"测绘中介服务机构",value:t[a],key:a,span:3}),"CLBG"===a&&e.push({label:"测量报告",value:t[a],key:a,span:3}),"CLSX"===a&&e.push({label:"测量事项",value:t[a],key:a,span:3}),"SCSJ"===a&&e.push({label:"上传时间",value:t[a],key:a,span:3}));return{title:"查看测量报告",descArray:e}},handleSurveyCompanyInfo:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&("DWDZ"===a&&e.push({label:"单位地址",value:t[a],key:a,span:3}),"DWMC"===a&&e.push({label:"单位名称",value:t[a],key:a,span:3}),"LXDH"===a&&e.push({label:"联系电话",value:t[a],key:a,span:3}),"LXR"===a&&e.push({label:"联系人",value:t[a],key:a,span:3}));return{title:"测绘服务机构信息",descArray:e}},handlePauseReason:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&("CLDW"===a&&e.push({label:"测绘中介服务机构",value:t[a],key:a,span:3}),"CLSX"===a&&e.push({label:"测量事项",value:t[a],key:a,span:3}),"LJYZT"===a&&e.push({label:"累计已暂停",value:t[a],key:a,span:3}),"XGFJ"===a&&e.push({label:"相关附件",value:t[a],key:a,span:3}),"ZTSJ"===a&&e.push({label:"暂停时间",value:t[a],key:a,span:3}),"ZTYY"===a&&e.push({label:"暂停原因",value:t[a],key:a,span:3}));return{title:"查看暂停原因",descArray:e}},handleWhy:function(t){this.tableId=t["TABLE001ID"],this.tableCLSX=t["CLSX"],this.GetPauseReason(),this.clztVisible=!0},handleGroupMore:function(t){this.tableChdw=t["CHDW"],this.GetSurveyCompanyInfo(),this.clztVisible=!0},handleQueryReport:function(t,e){this.clnum=e,0===e?this.clbgData.title="确认测量报告":1===e&&(this.clbgData.title="确认测量合同"),this.tableId=t["TABLE008ID"],this.GetSurveyReport(),this.clbgObjArr=t,this.clbgVisible=!0},handleClztOk:function(){this.clztVisible=!1},handleClztCancle:function(){this.clztVisible=!1},handleClbgOk:function(){var t=this,e=this.clbgObjArr.CLSX,a=this.clbgObjArr.LXDH,n=this.clbgObjArr.TABLE001ID,l=this.clbgObjArr.TABLE008ID,s=this.captcha,i="";0===this.clnum?i="QueryProgress":1===this.clnum&&(i="ClhtConfirm"),this._.isEmpty(s)?this.$message.warning("请输入验证码！"):(this.$WebApi.busiProcess[i]({clsx:e,lxdh:a,table001id:n,table008id:l,captcha:s}).then((function(e){e.code&&998===e.code?t.$message.warning(e.desc):(t.$message.success("您已成功确认！"),t.busiProReload())})).catch((function(e){t.$message.error("您确认操作失败！")})),this.clbgVisible=!1)},handleClbgCancle:function(){this.clbgVisible=!1},getCaptcha:function(t){var e=this;t.preventDefault(),this.$WebApi.user["SendVerification"]({sPhoneNum:this.clbgObjArr.LXDH}).then((function(t){e.state.smsSendBtn=!0,"短信发送失败！"===t?e.$message.error("短信发送失败!60秒后再验证"):e.$message.success("短信发送成功!");var a=window.setInterval((function(){e.state.time--<=0&&(e.state.time=60,e.state.smsSendBtn=!1,window.clearInterval(a))}),1e3)})).catch((function(t){}))},handleClbgfjOk:function(){this.clbgfjVisible=!1},handleClbgfjCancle:function(){this.clbgfjVisible=!1},handleQueryCL:function(t){var e=t.map((function(t,e){return{label:t.FJNAME,value:t.FJURL}}));this.$set(this.clbgfjData,"descArray",e),this.clbgfjVisible=!0}}},r=i,c=(a("9d64"),a("2877")),o=Object(c["a"])(r,n,l,!1,null,"51b5a6de",null);e["default"]=o.exports},6191:function(t,e,a){},"9d64":function(t,e,a){"use strict";a("6191")}}]);