(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce2dfc38"],{2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("6b75");function s(e){if(Array.isArray(e))return Object(n["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=a("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return s(e)||i(e)||Object(o["a"])(e)||r()}},"7fed":function(e,t,a){"use strict";a("a7e8")},a7e8:function(e,t,a){},ff03:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-table",{attrs:{size:"small",columns:e.columns,"data-source":e.data?e.data:[],loading:e.tableLoading,pagination:!1,rowKey:function(e){return e["index"]},expandedRowKeys:e.expandedRowKeys},on:{expandedRowsChange:e.expandedRowsChange},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return[t.showdata&&t.showdata.length>0?[e._l(t.showdata,(function(n,s){return[a("a-row",{key:s,style:{marginBottom:"4px",textAlign:"left"}},[a("a-col",{attrs:{span:"8"}},[a("a",{style:{marginRight:"10px"},attrs:{href:n.url,target:"_blank"}},[e._v(e._s(n.name))])]),a("a-col",{attrs:{span:"4"}},[0==e.disabled?a("a-button",{attrs:{type:"danger",size:"small",icon:"delete"},on:{click:function(a){return e.deleteFile(t,s)}}}):e._e()],1)],1)]}))]:a("a-empty")]}},{key:"action",fn:function(t,n){return[[a("a-upload",{attrs:{name:"file",multiple:!0,action:e.MaterialUpload,"file-list":n.action,showUploadList:!1,disabled:1==e.disabled},on:{change:function(t){return e.handleChange(t,n)}}},[a("a-button",{attrs:{size:"small",type:"primary",icon:"upload",disabled:1==e.disabled}},[e._v("点这里上传")])],1)]]}}])})],1)},s=[],i=(a("4de4"),a("d81d"),a("45fc"),a("a434"),a("b0c0"),a("2909")),o=a("5530"),r=a("377c"),d={name:"SmTable",components:{},props:{tableData:{default:function(){},type:Object,required:!0},disabled:{default:!1,type:Boolean,required:!0}},data:function(){return{MaterialUpload:r["K"],expandedRowKeys:[],data:[],columns:[],tableLoading:!1,isUploading:!1}},computed:{},watch:{tableData:{handler:function(e,t){this._.isEmpty(e)||(this.tableLoading=!0,this.columns=this.getTableColumn(this.tableData),this.data=this.getTableData(this.tableData),this.tableLoading=!1)},deep:!0}},created:function(){},mounted:function(){this.columns=this.getTableColumn(this.tableData),this.data=this.getTableData(this.tableData)},methods:{getTableColumn:function(e){if(this._.isEmpty(e))return{};var t=e.columns,a=e.hideColumns,n=t.filter((function(e){return!a.some((function(t){return t===e.key}))})),s=n.map((function(e,t){return{dataIndex:e["key"],key:e["key"],title:e["label"],scopedSlots:{customRender:e["key"]}}}));return s.push({dataIndex:"action",key:"action",title:"操作",scopedSlots:{customRender:"action"}}),s},getTableData:function(e){var t=this,a=[];if(this.expandedRowKeys=[],this._.isEmpty(e))a=[];else{var n=e.rowsList;a=n.map((function(e,a){var n=[],s=[],i=[];for(var r in e)"NAME"===r&&(n=e[r],e[r]&&e[r].length>0&&t.expandedRowKeys.push(a)),"ZCURL"===r&&(s=e[r]);return n.map((function(e,t){i.push({name:e,url:s[t]})})),Object(o["a"])(Object(o["a"])({},e),{},{index:a,showdata:i,action:[]})}))}return a},handleChange:function(e,t){var a=Object(i["a"])(e.fileList),n=e.file;n.status&&"removed"===n.status||(this.isUploading=!0,this.$emit("uploadStatusChange",this.isUploading)),n.response&&"done"===n.status&&(0===n.response.code?(t.showdata.push({name:n.response.data[0].fileName,url:n.response.data[0].fileUrl}),t.NAME.push(n.response.data[0].fileName),t.ZCURL.push(n.response.data[0].fileUrl),this.expandedRowKeys.push(t.index)):this.$message.error("文件上传失败！"),this.isUploading=!1,this.$emit("uploadStatusChange",this.isUploading)),"error"===n.status&&(this.$message.error("文件: "+n.name+"上传失败！"),this.isUploading=!1,this.$emit("uploadStatusChange",this.isUploading)),a=a.map((function(e){return e.response&&"done"===e.status&&e.response.code,e})),t.action=a},expandedRowsChange:function(e){this.expandedRowKeys=e},deleteFile:function(e,t){e.showdata.splice(t,1),e.NAME.splice(t,1),e.ZCURL.splice(t,1),e.NAME&&0===e.NAME.length&&this.expandedRowKeys.splice(e.index,1,null)}}},l=d,u=(a("7fed"),a("2877")),c=Object(u["a"])(l,n,s,!1,null,"68327b89",null);t["default"]=c.exports}}]);