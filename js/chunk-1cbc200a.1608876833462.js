(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cbc200a","chunk-10051558"],{1233:function(e,t,a){},"269b":function(e,t,a){"use strict";a("bbf3")},"2aef":function(e,t,a){"use strict";a("1233")},"2c2e":function(e,t,a){"use strict";a("b456")},"3a85":function(e,t,a){"use strict";a("9aba")},"6aa0":function(e,t,a){},"755f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"protocol"},[a("a-spin",{attrs:{spinning:e.spinning,delay:e.delayTime}},[a("div",{staticClass:"top"},[a("div",{staticClass:"DKBT"},[e._v(e._s(e.protocolRowslist.DKBT))]),a("div",{staticClass:"DYBFSM suojin"},[e._v(e._s(e.protocolRowslist.DYBFSM))]),a("div",{staticClass:"DEBFSMBT"},[e._v(e._s(e.protocolRowslist.DEBFSMBT)+"：")]),a("div",{staticClass:"DSBFSM"},[a("a-icon",{attrs:{type:"info-circle"}}),e._v(" "+e._s(e.protocolRowslist.DSBFSM))],1)]),a("div",{staticClass:"content",style:{maxHeight:e.clientHeight?e.clientHeight-250+"px":"100%"}},[a("div",{staticClass:"CXTABLE1 suojin"},[a("a-list",{attrs:{bordered:"","data-source":e.protocolRowslist.CXTABLE1},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[e._v(" "+e._s(t.value)+" ")])}}])})],1)]),a("div",{staticClass:"footer"},[a("div",[a("a-checkbox",{on:{change:e.onChange}},[e._v(" "+e._s(e.protocolRowslist.GXKWZ)+" ")])],1),a("div",{staticClass:"button"},[a("a-button",{attrs:{disabled:!(e.isChecked&&e.numTime<=0)},on:{click:e.handleYY}},[e._v("我要预约业务 "),e.numTime>0?[e._v("("+e._s(e.numTime)+"s)")]:e._e()],2)],1)])])],1)},n=[],i=a("ed08"),o={name:"ShowProtocol",components:{},props:{},data:function(){return{clientHeight:null,protocolData:"",protocolRowslist:[],isChecked:!1,spinning:!1,delayTime:0,numTime:5}},computed:{},watch:{},created:function(){},mounted:function(){this.GetEntrustDesc(),this.changeNum(),this.clientHeight=this.$parent.$el.clientHeight},methods:{GetEntrustDesc:function(){var e=this;this.spinning=!0,this.$WebApi.preBusiness["GetEntrustDesc"]().then((function(t){e.protocolRowslist=t.rowsList[0],e.protocolData=i["b"].table2Desc(t)})).catch((function(e){})).then((function(){e.spinning=!1}))},onChange:function(e){this.isChecked=e.target.checked},handleYY:function(){this.$emit("currentStepOK",{componentName:"ShowProtocol",num:1})},changeNum:function(){var e=this;setInterval((function(){if(!(e.numTime>0))return!1;e.numTime--}),1e3)}}},r=o,c=(a("269b"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"55901810",null);t["default"]=l.exports},"77d7":function(e,t,a){"use strict";a("6aa0")},"82da":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FileTable"},[a("div",{staticClass:"content"},[a("upload-table",{ref:"uploadTable",attrs:{tableData:e.tableData,disabled:!1}})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"my-button"},[e._.isEmpty(e.permission.isTemporarySave)&&!0===e.permission.isTemporarySave?[a("a-button",{attrs:{type:"primary"},on:{click:e.saveCurrentData}},[e._v("暂存")])]:e._e(),a("a-button",{on:{click:function(t){return e.handleTableData(-1)}}},[e._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleTableData(1)}}},[e._v(e._s(e.isLast?"提交申请":"下一步"))])],2)])])},n=[],i=(a("a15b"),a("d81d"),a("4c6d")),o={name:"FileTable",components:{"upload-table":i["default"]},props:{isLast:{default:!1,type:Boolean,required:!0},permission:{default:function(){},type:Object,required:!0},remoteData:{default:function(){},type:Object,required:!1}},data:function(){return{tableData:{columns:[],hideColumns:[],rowsList:[]},submitData:[]}},computed:{},watch:{remoteData:{handler:function(e,t){},immediate:!0,deep:!0},"$store.state.preBusniess.HandlePreBusniessState":function(){var e=this.$store.state.preBusniess.SaveData;if(e){var t=e["saveData"],a=e["ischange"];if(t&&t.length>0){var s=[];t.map((function(e,t){if(e.clsx&&e.clsx.length>0){var a=e.clsx[e.clsx.length-1];Window._.isEmpty(a)||s.push(a)}})),this.GetProvideFileList(s.join(";"),a)}}}},mounted:function(){},methods:{GetProvideFileList:function(e,t){var a=this;this.$WebApi.preBusiness["GetProvideFileList"]({sWTSX:e}).then((function(e){e["rowsList"]&&e["rowsList"].length>0&&(a.tableData=e,t||a.$set(a.tableData,"rowsList",a.remoteData.files))})).catch((function(e){}))},handleTableData:function(e){1===e?this.isEnableSubmit()&&this.$emit("currentStepOK",{componentName:"OtherTable",num:e}):this.$emit("currentStepOK",{componentName:"OtherTable",num:e})},isEnableSubmit:function(){var e=!0;return this.$refs.uploadTable.isAllSubmit(!0)||(e=!1),e||this.$message.error("材料上传失败"),e},getSubmitData:function(){return{files:this.$refs.uploadTable.getSubmitData()}},saveCurrentData:function(){this.$emit("saveAllData")},fillData2form:function(e){}}},r=o,c=(a("3a85"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"77d0fd88",null);t["default"]=l.exports},8589:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[!1===e.isReload?["sync"===e.submitStatus?a("a-result",{attrs:{title:"预约提交中..."},scopedSlots:e._u([{key:"icon",fn:function(){return[a("a-icon",{attrs:{type:"sync",spin:""}})]},proxy:!0}],null,!1,1235788773)}):e._e(),"success"===e.submitStatus?a("a-result",{attrs:{status:"success",title:"您提交成功","sub-title":""}}):e._e(),"error"===e.submitStatus?a("a-result",{attrs:{status:"error",title:"您提交失败","sub-title":""}}):e._e(),"sync"!=e.submitStatus?a("div",{staticStyle:{"text-align":"center"}},[a("a-row",{attrs:{gutter:4,type:"flex",justify:"center",align:"middle"}},[a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{type:"primary"},on:{click:e.hadleRefresh}},[e._v("继续申请")])],1),a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleQueryMore}},[e._v("查看申请详情")])],1)],1)],1):e._e()]:e._e()],2)},n=[],i=a("ed08"),o={name:"Result",components:{},props:{submitStatus:{default:"sync",type:String,required:!0}},data:function(){return{isReload:!1}},computed:{},watch:{submitStatus:function(e,t){var a=this;this.isReload=!0,this.$nextTick((function(){a.isReload=!1}))}},created:function(){this.handleSubmit()},methods:{handleQueryMore:function(){this.$router.push({name:"businessProcess",params:{hasRefresh:!0}})},hadleRefresh:function(){var e=this;i["a"].reloadComponent(e)},handleSubmit:function(){this.$emit("submitAllData")}}},r=o,c=a("2877"),l=Object(c["a"])(r,s,n,!1,null,"2764ffe7",null);t["default"]=l.exports},"9aba":function(e,t,a){},b456:function(e,t,a){},bbf3:function(e,t,a){},d571:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"OtherTable"},[a("div",{staticClass:"content"},[a("p",[e._v(" "+e._s(e.WTS.WTSSM||"委托书说明:")+" "),a("a",{attrs:{href:e.WTS.WTSMB,download:"委托书模板"}},[e._v("下载委托书模板")])]),a("upload-table",{ref:"WTTable",attrs:{tableData:e.tableData,disabled:!1}})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"my-button"},[e._.isEmpty(e.permission.isTemporarySave)&&!0===e.permission.isTemporarySave?[a("a-button",{attrs:{type:"primary"},on:{click:e.saveCurrentData}},[e._v("暂存")])]:e._e(),a("a-button",{on:{click:function(t){return e.handleTableData(-1)}}},[e._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleTableData(1)}}},[e._v(e._s(e.isLast?"提交申请":"下一步"))])],2)])])},n=[],i=a("4c6d"),o={name:"OtherTable",components:{"upload-table":i["default"]},props:{isLast:{default:!1,type:Boolean,required:!0},permission:{default:function(){},type:Object,required:!0},remoteData:{default:function(){},type:Object,required:!1}},data:function(){return{WTS:{WTSSM:"",WTSMB:""},tableData:{columns:[],hideColumns:[],rowsList:[]}}},computed:{},watch:{remoteData:{handler:function(e,t){e&&this.fillData2form(e)},immediate:!0,deep:!0}},created:function(){},mounted:function(){this.tableData=this.getTableData(),this.getCLWTS()},methods:{getTableData:function(){return{columns:[{label:"序号",key:"index",type:"text"},{label:"材料名称",key:"CLMC",type:"text"},{label:"备注说明",key:"BZSM",type:"text"},{label:"附件",key:"FJLIST",type:"text"}],hideColumns:["BZSM","FJLIST"],rowsList:[{index:"1",CLMC:"规划核实测量委托书",BZSM:"",FJLIST:[]},{index:"2",CLMC:"土地测绘委托书",BZSM:"",FJLIST:[]},{index:"3",CLMC:"房产实测委托书",BZSM:"",FJLIST:[]}]}},getCLWTS:function(){var e=this;this.$WebApi.preBusiness["GetEntrustTempWeb"]().then((function(t){e.WTS=t.rowsList[0].WTSMB})).catch((function(e){}))},handleTableData:function(e){1===e?this.isEnableSubmit()&&this.$emit("currentStepOK",{componentName:"OtherTable",num:e}):this.$emit("currentStepOK",{componentName:"OtherTable",num:e})},isEnableSubmit:function(){var e=!0;return this.$refs.WTTable.isAllSubmit()||(e=!1),e||this.$message.error("委托书填写失败"),e},getSubmitData:function(){return{files:this.$refs.WTTable.getSubmitData()}},saveCurrentData:function(){this.$emit("saveAllData")},fillData2form:function(e){Window._.isEmpty(e)||this.$set(this.tableData,"rowsList",e["REC_CLWTS"])}}},r=o,c=(a("2c2e"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"66171901",null);t["default"]=l.exports},f60e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"PreBusiness",staticStyle:{height:"100%"}},[a("a-layout",{staticClass:"preBusinessLayout"},[a("a-layout-header",{staticClass:"pageHeader"},[a("a-steps",{attrs:{current:e.current,size:"small"}},e._l(e.processData,(function(e,t){return a("a-step",{key:t,attrs:{title:e.componentDesc}})})),1)],1),a("a-layout-content",{staticClass:"content"},[a("ShowProtocol",{directives:[{name:"show",rawName:"v-show",value:"ShowProtocol"===e.currentComponentName,expression:"currentComponentName === 'ShowProtocol'"}],ref:"showProtocol",attrs:{isLast:e.componentNameArray.indexOf("ShowProtocol")===e.componentNameArray.length-2,permission:e.permissions.ShowProtocol},on:{currentStepOK:e.handleCurrentStepOK,saveAllData:e.saveAllData}}),e.componentReFresh.commonForm?a("CommonFormFinal",{directives:[{name:"show",rawName:"v-show",value:"CommonFormFinal"===e.currentComponentName,expression:"currentComponentName === 'CommonFormFinal'"}],ref:"commonForm",attrs:{isLast:e.componentNameArray.indexOf("CommonFormFinal")===e.componentNameArray.length-2,remoteData:e.componentNameArray.indexOf("CommonFormFinal")>-1?e.processData[e.componentNameArray.indexOf("CommonFormFinal")]["data"]:{},permission:e.permissions.CommonFormFinal},on:{currentStepOK:e.handleCurrentStepOK,saveAllData:e.saveAllData}}):e._e(),a("FileTable",{directives:[{name:"show",rawName:"v-show",value:"FileTable"===e.currentComponentName,expression:"currentComponentName === 'FileTable'"}],ref:"fileTable",attrs:{isLast:e.componentNameArray.indexOf("FileTable")===e.componentNameArray.length-2,remoteData:e.componentNameArray.indexOf("FileTable")>-1?e.processData[e.componentNameArray.indexOf("FileTable")]["data"]:{},permission:e.permissions.FileTable},on:{currentStepOK:e.handleCurrentStepOK,saveAllData:e.saveAllData}}),a("CascaderSelect",{directives:[{name:"show",rawName:"v-show",value:"CascaderSelect"===e.currentComponentName,expression:"currentComponentName === 'CascaderSelect'"}],ref:"cascaderSelect",attrs:{isLast:e.componentNameArray.indexOf("CascaderSelect")===e.componentNameArray.length-2,remoteData:e.componentNameArray.indexOf("CascaderSelect")>-1?e.processData[e.componentNameArray.indexOf("CascaderSelect")]["data"]:{},permission:e.permissions.CascaderSelect},on:{currentStepOK:e.handleCurrentStepOK,saveAllData:e.saveAllData}}),a("OtherTable",{directives:[{name:"show",rawName:"v-show",value:"OtherTable"===e.currentComponentName,expression:"currentComponentName === 'OtherTable'"}],ref:"otherTable",attrs:{isLast:e.componentNameArray.indexOf("OtherTable")===e.componentNameArray.length-2,remoteData:e.componentNameArray.indexOf("OtherTable")>-1?e.processData[e.componentNameArray.indexOf("OtherTable")]["data"]:{},permission:e.permissions.OtherTable},on:{currentStepOK:e.handleCurrentStepOK,saveAllData:e.saveAllData}}),"Result"===e.currentComponentName?a("Result",{ref:"result",attrs:{isLast:e.componentNameArray.indexOf("Result")===e.componentNameArray.length-2,isSubmitSuccess:e.isSubmitSuccess,permission:e.permissions.Result},on:{currentStepOK:e.handleCurrentStepOK,submitAllData:e.submitAllData}}):e._e()],1)],1)],1)},n=[],i=(a("c975"),a("d81d"),a("fb6a"),a("5530")),o=a("ba93"),r=a("5880"),c=a("ed08"),l=a("755f"),u=a("a0b5"),m=a("82da"),h=a("fd19"),d=a("d571"),p=a("8589"),f={name:"PreBusiness",components:{CommonFormFinal:u["default"],CascaderSelect:h["default"],FileTable:m["default"],ShowProtocol:l["default"],OtherTable:d["default"],Result:p["default"]},inject:["reloadRoot"],props:{},data:function(){return{lightApi:o["a"],pageHeight:0,stepData:{current:0,steps:[{title:"申请表单"},{title:"结果"}]},docunid:"",saveData:{},current:0,permissions:{ShowProtocol:{},CommonFormFinal:{},CascaderSelect:{},FileTable:{},OtherTable:{},Result:{}},componentReFresh:{commonForm:!0},currentComponentName:"",currentComponentDesc:"",processData:[{componentDesc:"预约协议",componentName:"ShowProtocol",data:{}},{componentDesc:"预约基础表",componentName:"CommonFormFinal",permission:{REC_GCMC:{isShow:!0,isCheck:!0},REC_GCBH:{isShow:!0,isCheck:!0},REC_JSXZ:{isShow:!0,isCheck:!0},REC_TDLY:{isShow:!0,isCheck:!0},REC_XZQ:{isShow:!0,isCheck:!0},REC_GCXXDD:{isShow:!0,isCheck:!0},REC_WTDW:{isShow:!0,isCheck:!0},REC_LXR:{isShow:!0,isCheck:!0},REC_LXDH:{isShow:!0,isCheck:!0},REC_DZYX:{isShow:!0,isCheck:!0},REC_QJFS:{isShow:!0,isCheck:!0},REC_SJDZ:{isShow:!0,isCheck:!0},REC_SJR:{isShow:!0,isCheck:!0},REC_SJDH:{isShow:!0,isCheck:!0}},data:{}},{componentDesc:"测量事项",componentName:"CascaderSelect",data:{}},{componentDesc:"材料上传",componentName:"FileTable",data:{}},{componentDesc:"委托书",componentName:"OtherTable",data:{}},{componentDesc:"预约提交",componentName:"Result",data:{}}],componentNameArray:[],isSubmitSuccess:!0,isSaveSuccess:!0}},computed:Object(i["a"])({},Object(r["mapGetters"])({user:"userInfo"})),watch:{},created:function(){this.pageHeight=window.innerHeight},mounted:function(){this.docunid=this.$route.params.docunid,this._.isEmpty(this.user)||this._.isEmpty(this.docunid)?this.GetComponentConfig():this.GetDataByTemporarilyToCode()},updated:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(r["mapActions"])(["setPageNum","setDocunid"])),{},{GetComponentConfig:function(){var e=this;this.$WebApi.preBusiness["GetComponentConfig"]().then((function(t){t&&t.length>0&&(e.currentComponentName=t[0].componentName,e.currentComponentDesc=t[0].componentDesc,e.processData=t,e.getComponentName(t))})).catch((function(e){}))},handleProcessData:function(e){var t=this;e&&e.length>0&&e.map((function(e,a){e.permission&&!Window._.isEmpty(e.permission)&&t.componentNameArray.indexOf(e.componentName)>-1&&(t.permissions[e.componentName]=e.permission,t.componentReFresh[e.componentName]=!1,t.$nextTick((function(){t.componentReFresh[e.componentName]=!0})))}))},GetDataByTemporarilyToCode:function(){var e=this;this.$WebApi.preBusiness["GetDataByTemporarilyToCode"]({code:this.docunid,userid:this.user.userID}).then((function(t){e.currentComponentName=t[0].componentName,e.currentComponentDesc=t[0].componentDesc,e.processData=t.slice(0,t.length-1),e.getComponentName(t.slice(0,t.length-1))})).catch((function(e){}))},GetPersonAppointmentDetail:function(e){var t=this;this.$WebApi.busiProcess["GetPersonAppointmentDetail"]({sRID:this.docunid}).then((function(e){var a={};t.saveData=e.rowsList[0],a.REC_DZYX=t.saveData.DZYX,a.REC_GCMC=t.saveData.GCMC,a.REC_GCXXDD=t.saveData.GCXXDD,a.REC_GCBH=t.saveData.GGZH,a.REC_WTDW=t.saveData.JSDW,a.REC_JSXZ=t.saveData.JSXZ,a.REC_LXDH=t.saveData.LXDH,a.REC_LXR=t.saveData.LXR,a.REC_QJFS=t.saveData.QJFS,a.REC_TDLY=t.saveData.TDLY,a.REC_XZQ=t.saveData.XZQ,t.$refs.commonForm.form=Object(i["a"])({},a)})).catch((function(e){}))},getComponentName:function(e){var t=[];e&&e.length>0&&e.map((function(e,a){Window._.isEmpty(e.componentName)||t.push(e.componentName)})),this.componentNameArray=t,this.handleProcessData(JSON.parse(JSON.stringify(e)))},handleSubmit:function(){var e=[];if(this.componentNameArray.indexOf("CommonFormFinal")>-1&&this.$refs.commonForm.isEnableSubmit()){var t="CommonFormFinal";this.processData[this.componentNameArray.indexOf(t)].data=this.$refs.commonForm.getSubmitData()}if(this.componentNameArray.indexOf("CascaderSelect")>-1&&this.$refs.cascaderSelect.isEnableSubmit()){var a="CascaderSelect";this.processData[this.componentNameArray.indexOf(a)].data=this.$refs.cascaderSelect.getSubmitData()}if(this.componentNameArray.indexOf("FileTable")>-1&&this.$refs.fileTable.isEnableSubmit()){var s="FileTable";this.processData[this.componentNameArray.indexOf(s)].data=this.$refs.fileTable.getSubmitData()}if(this.componentNameArray.indexOf("OtherTable")>-1&&this.$refs.otherTable.isEnableSubmit()){var n="OtherTable";this.processData[this.componentNameArray.indexOf(n)].data=this.$refs.otherTable.getSubmitData()}e=JSON.parse(JSON.stringify(this.processData)),e.push({userid:this.user.userID,docunid:this.docunid}),this.handleSubmitData(e)},handleSave:function(){var e=[];if(this.componentNameArray.indexOf("CommonFormFinal")>-1){var t="CommonFormFinal";this.processData[this.componentNameArray.indexOf(t)].data=this.$refs.commonForm.getSubmitData()}if(this.componentNameArray.indexOf("CascaderSelect")>-1){var a="CascaderSelect";this.processData[this.componentNameArray.indexOf(a)].data=this.$refs.cascaderSelect.getSubmitData()}if(this.componentNameArray.indexOf("FileTable")>-1){var s="FileTable";this.processData[this.componentNameArray.indexOf(s)].data=this.$refs.fileTable.getSubmitData()}if(this.componentNameArray.indexOf("OtherTable")>-1){var n="OtherTable";this.processData[this.componentNameArray.indexOf(n)].data=this.$refs.otherTable.getSubmitData()}e=JSON.parse(JSON.stringify(this.processData)),e.push({userid:this.user.userID,docunid:this.docunid}),this.handleSaveData(e)},handleSaveData:function(e){},handleSubmitData:function(e){var t=this;this.$WebApi.preBusiness["SubmitEntrust"]({data:JSON.stringify(e)}).then((function(e){t.isSubmitSuccess=!0})).catch((function(e){t.isSubmitSuccess=!1}))},handleQueryMore:function(){this.$router.push({name:"businessProcess",params:{hasRefresh:!0}})},hadleRefresh:function(){var e=this;c["a"].reloadComponent(e)},handleCurrentStepOK:function(e){var t=this.current;1===e.num?this.current=++t:-1===e.num&&(this.current=--t),this.processData[t]&&(this.currentComponentName=this.processData[t].componentName,this.currentComponentDesc=this.processData[t].componentDesc)},submitAllData:function(){this.handleSubmit()},saveAllData:function(){this.handleSave()}})},b=f,v=(a("77d7"),a("2877")),D=Object(v["a"])(b,s,n,!1,null,"95bcaffe",null);t["default"]=D.exports},fd19:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cascader-select"},[a("div",{staticClass:"content"},[e.reload?[e._l(e.saveData,(function(t,s){return[a("div",{key:s,staticClass:"my-items"},[a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[e._v("测量事项")]):e._e(),a("a-cascader",{ref:"cascader",refInFor:!0,attrs:{allowClear:!1,options:e.options,fieldNames:{label:"title",value:"title",children:"rows"},"display-render":e.displayRender,"show-search":{filter:e.filter},"expand-trigger":"hover",placeholder:"请选择测量事项"},on:{change:function(t,a){return e.clsxChange(s,t,a)}},model:{value:e.saveData[s].clsx,callback:function(t){e.$set(e.saveData[s],"clsx",t)},expression:"saveData[index].clsx"}})],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[e._v("测绘单位")]):e._e(),a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择测绘公司","option-filter-prop":"children","filter-option":e.filterOption},on:{focus:e.handleFocus,blur:e.handleBlur,change:function(t){return e.compChange(s,t)}},model:{value:e.saveData[s].cldw,callback:function(t){e.$set(e.saveData[s],"cldw",t)},expression:"saveData[index].cldw"}},[e._l(e.selectData,(function(t,s){return[a("a-select-option",{key:s,attrs:{value:t.value}},[e._v(" "+e._s(t.value)+" ")])]}))],2)],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[e._v("联系人")]):e._e(),a("a-input",{attrs:{value:e.saveData[s].LXR||"-",disabled:""}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[e._v("联系电话")]):e._e(),a("a-input",{attrs:{value:e.saveData[s].LXDH||"-",disabled:""}},[a("a-icon",{attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),a("div",{staticClass:"my-item"},[0===s?a("div",{staticClass:"item-header"},[e._v("操作")]):e._e(),a("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteItem(s)}}},[e._v("删除")])],1)])]}))]:e._e(),a("div",{staticClass:"add-button"},[a("a-button",{attrs:{type:"primary"},on:{click:e.addRows}},[e._v("添加")])],1)],2),a("div",{staticClass:"footer"},[a("div",{staticClass:"my-button"},[e._.isEmpty(e.permission.isTemporarySave)&&!0===e.permission.isTemporarySave?[a("a-button",{attrs:{type:"primary"},on:{click:e.saveCurrentData}},[e._v("暂存")])]:e._e(),a("a-button",{on:{click:function(t){return e.handleTableData(-1)}}},[e._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleTableData(1)}}},[e._v(e._s(e.isLast?"提交申请":"下一步"))])],2)])])},n=[],i=(a("c975"),a("d81d"),a("45fc"),a("a434"),{name:"CascaderSelect",components:{},props:{isLast:{default:!1,type:Boolean,required:!0},permission:{default:function(){},type:Object,required:!0},remoteData:{default:function(){},type:Object,required:!1}},data:function(){return{reload:!0,options:[{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou",children:[{value:"xihu",label:"West Lake"}]}]},{value:"jiangsu",label:"Jiangsu",children:[{value:"nanjing",label:"Nanjing",children:[{value:"zhonghuamen",label:"Zhong Hua Men"}]}]}],selectData:[],selectedOptions:[],saveData:[{clsx:[],cldw:"",LXR:"",LXDH:""}],ischange:!1}},computed:{},watch:{remoteData:{handler:function(e,t){e&&this.fillData2form(e)},immediate:!0,deep:!0}},created:function(){},mounted:function(){this.GetMeasurementItems()},methods:{GetSurveyCompanyInfo:function(e,t){var a=this;this.$WebApi.busiProcess["GetSurveyCompanyInfo"]({chdw:e}).then((function(e){a.saveData[t].LXR=e.LXR,a.saveData[t].LXDH=e.LXDH})).catch((function(e){}))},GetMeasurementItems:function(){var e=this;this.$WebApi.preBusiness["GetMeasurementItems"]().then((function(t){var a=t.rowsList[0].CLSX,s=t.rowsList[0].CLDW;e.options=a,e.selectData=s})).catch((function(e){}))},clsxChange:function(e,t,a){this.ischange=!0,a[a.length-1].disabled=!0,this.selectedOptions[e]=a,this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE")},displayRender:function(e){var t=e.labels;return t[t.length-1]},filter:function(e,t){return t.some((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1}))},compChange:function(e,t){this.GetSurveyCompanyInfo(t,e)},handleBlur:function(){},handleFocus:function(){},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},addRows:function(){this.ischange=!0,this.saveData.push({clsx:[],cldw:"",LXR:"",LXDH:""}),this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE")},deleteItem:function(e){var t=this;this.ischange=!0,this.selectedOptions[e]&&(this.selectedOptions[e].length>0?this.selectedOptions[e][this.selectedOptions[e].length-1].disabled=!1:this.selectedOptions[e]["disabled"]=!1,this.selectedOptions.splice(e,1));var a=JSON.parse(JSON.stringify(this.saveData));a.splice(e,1),this.saveData=[],this.saveData=a,this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE"),this.reload=!1,this.$nextTick((function(){t.reload=!0}))},handleTableData:function(e){1===e?(Window._.isEmpty(this.remoteData)||(this.$store.commit("CHANGE_SAVE_DATA",{saveData:this.saveData,ischange:this.ischange}),this.$store.commit("CHANGE_HANDLE_PRE_BUSNISS_STATE")),this.isEnableSubmit()&&this.$emit("currentStepOK",{componentName:"CascaderSelect",num:e})):this.$emit("currentStepOK",{componentName:"CascaderSelect",num:e})},isEnableSubmit:function(){var e=!0;return this.saveData&&this.saveData.length>0?this.saveData.map((function(t,a){Window._.isEmpty(t.cldw)&&(e=!1),t.clsx&&0===t.clsx.length&&(e=!1)})):e=!1,e||this.$message.error("测量事项填写失败"),e},getSubmitData:function(){var e=this.saveData;return{REC_CLSX:e}},saveCurrentData:function(){this.$emit("saveAllData")},fillData2form:function(e){var t=this;Window._.isEmpty(e)||(this.saveData=e["REC_CLSX"],e["REC_CLSX"].map((function(e,a){var s=e.clsx[e.clsx.length-1];t.addDisable2options(t.options,s)})))},addDisable2options:function(e,t){var a=this;e.map((function(e,s){e.title===t&&(e.disabled=!0,a.selectedOptions.push(e)),e.rows&&e.rows.length>0&&a.addDisable2options(e.rows,t)}))}}}),o=i,r=(a("2aef"),a("2877")),c=Object(r["a"])(o,s,n,!1,null,"3c391b36",null);t["default"]=c.exports}}]);