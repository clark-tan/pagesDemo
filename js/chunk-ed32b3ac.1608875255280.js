(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed32b3ac"],{"1b63":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-table",{attrs:{size:"small",columns:t.columns,"data-source":t.data?t.data:[],loading:t.tableLoading,pagination:!1,rowKey:function(t){return t["CLSX"]}},scopedSlots:t._u([{key:"CLZT",fn:function(a,n){return["未开始"==a?e("a-tag",{staticClass:"unStart"},[t._v("未开始")]):"测量中"==a?e("a-tag",{staticClass:"other"},[t._v("测量中")]):"已完成"==a?e("a-tag",{staticClass:"survey-done"},[t._v("已完成")]):"暂停中"==a?[e("a-tag",{staticClass:"stop"},[t._v(t._s(a))]),e("a-button",{attrs:{type:"link"},on:{click:function(a){return t.handleWhy(n)}}},[t._v("查看原因")])]:e("a-tag",{staticClass:"other"},[t._v(t._s(a))])]}},{key:"CHDW",fn:function(a,n){return[e("a-button",{attrs:{type:"link"},on:{click:function(a){return t.handleGroupMore(n)}}},[t._v(t._s(a))])]}},{key:"CLBG",fn:function(a,n){return["查看"!=a?e("span",[t._v(t._s(a))]):e("a-button",{attrs:{type:"link"},on:{click:function(a){return t.handleQueryReport(n)}}},[t._v("查看")])]}}])}),e("a-modal",{attrs:{title:t.modalData.title,width:"600px",size:"small",footer:null},on:{ok:t.handleClztOk,cancel:t.handleClztCancle},model:{value:t.clztVisible,callback:function(a){t.clztVisible=a},expression:"clztVisible"}},[e("a-spin",{attrs:{spinning:t.modalSpinning,tip:"加载中..."}},[t.modalData["descArray"]&&t.modalData["descArray"].length>0?e("a-descriptions",{attrs:{title:"",size:"small",bordered:""}},[t._l(t.modalData["descArray"],(function(a,n){return["XGFJ"!=a["key"]&&"CLBG"!=a["key"]?e("a-descriptions-item",{key:n,attrs:{span:a["span"],label:a["label"]}},[t._v(t._s(a["value"]))]):t._e(),"XGFJ"==a["key"]?e("a-descriptions-item",{key:n,attrs:{span:a["span"],label:a["label"]}},t._l(a.value,(function(a,n){return e("div",{key:n},[e("a",{attrs:{type:"link",href:a.FJLJ,target:"_blank"}},[t._v(t._s(n+1)+"、"+t._s(a.FJMC))])])})),0):t._e(),"CLBG"==a["key"]?e("a-descriptions-item",{key:n,attrs:{span:a["span"],label:a["label"]}},t._l(a.value,(function(a,n){return e("div",{key:n},[e("span",[t._v(t._s(n+1)+"、"),e("a",{attrs:{href:a.FJLJ,target:"_blank"}},[t._v(" "+t._s(a.FJMC))])]),e("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"link",icon:"download",href:a.FJLJ,target:"_blank"}},[t._v("下载")])],1)})),0):t._e()]}))],2):e("a-empty")],1)],1)],1)},l=[],i=(e("4de4"),e("d81d"),e("45fc"),{name:"ReportTable",components:{},props:{tableData:{default:function(){},type:Object,required:!0}},data:function(){return{tableLoading:!1,columns:[],data:[],clztVisible:!1,modalData:{title:"",descArray:[]},modalSpinning:!1,tableId:"",tableCLSX:"",tableChdw:""}},computed:{},watch:{tableData:{handler:function(t,a){this._.isEmpty(t)||this.handlerDataChange()},deep:!0}},created:function(){},mounted:function(){this.handlerDataChange()},methods:{getTableColumn:function(t){if(this._.isEmpty(t))return[];var a=t.columns,e=t.hideColumns,n=a.filter((function(t){return!e.some((function(a){return a===t.key}))}));return n.map((function(t,a){return{dataIndex:t["key"],key:t["key"],title:t["label"],scopedSlots:{customRender:t["key"]}}}))},getTableData:function(t){return this._.isEmpty(t)?[]:t.rowsList},handlerDataChange:function(){this.tableLoading=!0;var t=JSON.parse(JSON.stringify(this.tableData));this.columns=this.getTableColumn(t),this.data=this.getTableData(t),this.tableLoading=!1},handleClztOk:function(){this.clztVisible=!1},handleClztCancle:function(){this.clztVisible=!1},handleWhy:function(t){this.tableId=t["TABLE001ID"],this.tableCLSX=t["CLSX"],this.GetPauseReason(),this.clztVisible=!0},handleGroupMore:function(t){this.tableChdw=t["CHDW"],this.GetSurveyCompanyInfo(),this.clztVisible=!0},handleQueryReport:function(t){this.tableId=t["TABLE008ID"],this.GetSurveyReport(),this.clztVisible=!0},GetPauseReason:function(){var t=this;this.modalSpinning=!0,this.$WebApi.reportOnline["GetPauseReason"]({table001id:this.tableId,clsx:this.tableCLSX}).then((function(a){var e=a;t._.isEmpty(e)||(t.modalData=t.handlePauseReason(e)),t.modalSpinning=!1})).catch((function(a){t.modalSpinning=!1}))},GetSurveyCompanyInfo:function(){var t=this;this.modalSpinning=!0,this.$WebApi.reportOnline["GetSurveyCompanyInfo"]({chdw:this.tableChdw}).then((function(a){var e=a;t._.isEmpty(e)||(t.modalData=t.handleSurveyCompanyInfo(e)),t.modalSpinning=!1})).catch((function(a){t.modalSpinning=!1}))},GetSurveyReport:function(){var t=this;this.modalSpinning=!0,this.$WebApi.reportOnline["GetSurveyReport"]({table008id:this.tableId}).then((function(a){var e=a;t._.isEmpty(e)||(t.modalData=t.handleSurveyReport(e)),t.modalSpinning=!1})).catch((function(a){t.modalSpinning=!1}))},handleSurveyReport:function(t){var a=[];for(var e in t)t.hasOwnProperty(e)&&("CHDW"===e&&a.push({label:"测绘单位",value:t[e],key:e,span:3}),"CLBG"===e&&a.push({label:"测量报告",value:t[e],key:e,span:3}),"CLSX"===e&&a.push({label:"测量事项",value:t[e],key:e,span:3}),"SCSJ"===e&&a.push({label:"上传时间",value:t[e],key:e,span:3}));return{title:"查看测量报告",descArray:a}},handleSurveyCompanyInfo:function(t){var a=[];for(var e in t)t.hasOwnProperty(e)&&("DWDZ"===e&&a.push({label:"单位地址",value:t[e],key:e,span:3}),"DWMC"===e&&a.push({label:"单位名称",value:t[e],key:e,span:3}),"LXDH"===e&&a.push({label:"联系电话",value:t[e],key:e,span:3}),"LXR"===e&&a.push({label:"联系人",value:t[e],key:e,span:3}));return{title:"测绘服务机构信息",descArray:a}},handlePauseReason:function(t){var a=[];for(var e in t)t.hasOwnProperty(e)&&("CLDW"===e&&a.push({label:"测绘单位",value:t[e],key:e,span:3}),"CLSX"===e&&a.push({label:"测量事项",value:t[e],key:e,span:3}),"LJYZT"===e&&a.push({label:"累计已暂停",value:t[e],key:e,span:3}),"XGFJ"===e&&a.push({label:"相关附件",value:t[e],key:e,span:3}),"ZTSJ"===e&&a.push({label:"暂停时间",value:t[e],key:e,span:3}),"ZTYY"===e&&a.push({label:"暂停原因",value:t[e],key:e,span:3}));return{title:"查看暂停原因",descArray:a}}}}),s=i,r=(e("740f"),e("2877")),o=Object(r["a"])(s,n,l,!1,null,"ee5268da",null);a["default"]=o.exports},"4fc3":function(t,a,e){},"740f":function(t,a,e){"use strict";e("4fc3")}}]);